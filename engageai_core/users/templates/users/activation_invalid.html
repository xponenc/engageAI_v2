{% extends 'base.html' %}
{% load static %}

{% block title %}–°—Å—ã–ª–∫–∞ –Ω–µ–¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–∞ | EngageAI{% endblock title %}

{% block css %}
<link href="{% static 'css/index.css' %}" rel="stylesheet">
<link href="{% static 'css/users/user.css' %}" rel="stylesheet">
<link href="{% static 'css/users/auth.css' %}" rel="stylesheet">
<link href="{% static 'css/users/email.css' %}" rel="stylesheet">
{% endblock css %}

{% block content %}
<section class="activation-error">
    <div class="activation-error__container container">
        <div class="activation-error__content">
            
            <!-- –û—Å–Ω–æ–≤–Ω–∞—è –∫–∞—Ä—Ç–æ—á–∫–∞ —Å –æ—à–∏–±–∫–æ–π -->
            <div class="activation-error__card card">
                <!-- –ò–∫–æ–Ω–∫–∞ –æ—à–∏–±–∫–∏ -->
                <div class="activation-error__icon">
                    <div class="error-icon">
                        <div class="error-icon__main">‚ö†Ô∏è</div>
                        <div class="error-icon__ring"></div>
                    </div>
                </div>

                <!-- –ó–∞–≥–æ–ª–æ–≤–æ–∫ –∏ –æ–ø–∏—Å–∞–Ω–∏–µ -->
                <div class="activation-error__header">
                    <h1 class="activation-error__title">–°—Å—ã–ª–∫–∞ –Ω–µ–¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–∞ –∏–ª–∏ —É—Å—Ç–∞—Ä–µ–ª–∞</h1>
                    <p class="activation-error__description">
                        –ü–æ—Ö–æ–∂–µ, —á—Ç–æ —Å—Å—ã–ª–∫–∞ –¥–ª—è –∞–∫—Ç–∏–≤–∞—Ü–∏–∏ –∞–∫–∫–∞—É–Ω—Ç–∞ –±–æ–ª—å—à–µ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç. 
                        –≠—Ç–æ –º–æ–≥–ª–æ –ø—Ä–æ–∏–∑–æ–π—Ç–∏ –ø–æ –Ω–µ—Å–∫–æ–ª—å–∫–∏–º –ø—Ä–∏—á–∏–Ω–∞–º:
                    </p>
                </div>

                <!-- –ü—Ä–∏—á–∏–Ω—ã –æ—à–∏–±–∫–∏ -->
                <div class="activation-error__reasons">
                    <div class="reason-item">
                        <div class="reason-item__icon">‚è∞</div>
                        <div class="reason-item__content">
                            <h3 class="reason-item__title">–°—Å—ã–ª–∫–∞ —É—Å—Ç–∞—Ä–µ–ª–∞</h3>
                            <p class="reason-item__desc">
                                –°—Å—ã–ª–∫–∏ –¥–ª—è –∞–∫—Ç–∏–≤–∞—Ü–∏–∏ –¥–µ–π—Å—Ç–≤—É—é—Ç –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω–æ–µ –≤—Ä–µ–º—è (–æ–±—ã—á–Ω–æ 24 —á–∞—Å–∞)
                            </p>
                        </div>
                    </div>
                    
                    <div class="reason-item">
                        <div class="reason-item__icon">üîó</div>
                        <div class="reason-item__content">
                            <h3 class="reason-item__title">–°—Å—ã–ª–∫–∞ —É–∂–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∞</h3>
                            <p class="reason-item__desc">
                                –í–æ–∑–º–æ–∂–Ω–æ, –≤—ã —É–∂–µ –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–ª–∏ –∞–∫–∫–∞—É–Ω—Ç —Ä–∞–Ω–µ–µ
                            </p>
                        </div>
                    </div>
                    
                    <div class="reason-item">
                        <div class="reason-item__icon">üìß</div>
                        <div class="reason-item__content">
                            <h3 class="reason-item__title">–û—à–∏–±–∫–∞ –ø—Ä–∏ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–∏</h3>
                            <p class="reason-item__desc">
                                –°—Å—ã–ª–∫–∞ –º–æ–≥–ª–∞ –±—ã—Ç—å –ø–æ–≤—Ä–µ–∂–¥–µ–Ω–∞ –ø—Ä–∏ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–∏ –∏–∑ –ø–∏—Å—å–º–∞
                            </p>
                        </div>
                    </div>
                </div>

                <!-- –§–æ—Ä–º–∞ –¥–ª—è –ø–æ–≤—Ç–æ—Ä–Ω–æ–π –æ—Ç–ø—Ä–∞–≤–∫–∏ -->
                <div class="activation-error__form">
                    <div class="form-header">
                        <h3 class="form-header__title">–ü–æ–ª—É—á–∏—Ç—å –Ω–æ–≤—É—é —Å—Å—ã–ª–∫—É</h3>
                        <p class="form-header__subtitle">
                            –í–≤–µ–¥–∏—Ç–µ –≤–∞—à email, –∏ –º—ã –æ—Ç–ø—Ä–∞–≤–∏–º –Ω–æ–≤–æ–µ –ø–∏—Å—å–º–æ –¥–ª—è –∞–∫—Ç–∏–≤–∞—Ü–∏–∏
                        </p>
                    </div>

                    <form action="{% url 'users:resend_activation' %}" method="post" class="resend-form">
                        {% csrf_token %}
                        
                        <div class="form-field">
                            <label for="email" class="form-field__label">
                                –≠–ª–µ–∫—Ç—Ä–æ–Ω–Ω–∞—è –ø–æ—á—Ç–∞
                            </label>
                            <div class="input-wrapper">
                                <div class="input-icon">üìß</div>
                                <input type="email" 
                                       name="email" 
                                       id="email" 
                                       placeholder="your@email.com" 
                                       required
                                       class="{% if form.errors %}input-error{% endif %}">
                            </div>
                            {% if form.errors %}
                            <div class="form-field__errors">
                                {% for error in form.errors %}
                                    <span>{{ error }}</span>
                                {% endfor %}
                            </div>
                            {% endif %}
                        </div>

                        <div class="form-actions">
                            <button type="submit" class="btn btn_primary btn_lg form-submit">
                                <span class="btn__icon">üîÑ</span>
                                –û—Ç–ø—Ä–∞–≤–∏—Ç—å –Ω–æ–≤–æ–µ –ø–∏—Å—å–º–æ
                            </button>
                        </div>
                    </form>
                </div>
            </div>

            <!-- –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–µ –¥–µ–π—Å—Ç–≤–∏—è -->
            <div class="activation-error__actions">
                <div class="action-cards">
                    <div class="action-card card">
                        <div class="action-card__icon">üîê</div>
                        <div class="action-card__content">
                            <h3 class="action-card__title">–ü–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å –≤–æ–π—Ç–∏</h3>
                            <p class="action-card__desc">
                                –í–æ–∑–º–æ–∂–Ω–æ, –≤–∞—à –∞–∫–∫–∞—É–Ω—Ç —É–∂–µ –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω
                            </p>
                            <a href="{% url 'users:login' %}" class="btn btn_outline btn_sm">
                                –í–æ–π—Ç–∏ –≤ —Å–∏—Å—Ç–µ–º—É
                            </a>
                        </div>
                    </div>
                    
                    <div class="action-card card">
                        <div class="action-card__icon">üìù</div>
                        <div class="action-card__content">
                            <h3 class="action-card__title">–°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–π –∞–∫–∫–∞—É–Ω—Ç</h3>
                            <p class="action-card__desc">
                                –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π—Ç–µ—Å—å —Å –Ω–æ–≤—ã–º email –∞–¥—Ä–µ—Å–æ–º
                            </p>
                            <a href="{% url 'users:sign-up' %}" class="btn btn_outline btn_sm">
                                –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è
                            </a>
                        </div>
                    </div>
                    
                    <div class="action-card card">
                        <div class="action-card__icon">üí¨</div>
                        <div class="action-card__content">
                            <h3 class="action-card__title">–ù—É–∂–Ω–∞ –ø–æ–º–æ—â—å?</h3>
                            <p class="action-card__desc">
                                –°–≤—è–∂–∏—Ç–µ—Å—å —Å –Ω–∞—à–µ–π —Å–ª—É–∂–±–æ–π –ø–æ–¥–¥–µ—Ä–∂–∫–∏
                            </p>
                            <a href="mailto:support@EngageAI.com" class="btn btn_ghost btn_sm">
                                –ù–∞–ø–∏—Å–∞—Ç—å –≤ –ø–æ–¥–¥–µ—Ä–∂–∫—É
                            </a>
                        </div>
                    </div>
                </div>
            </div>

            <!-- –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è -->
            <div class="activation-error__info">
                <div class="info-card card">
                    <div class="info-card__header">
                        <div class="info-card__icon">üí°</div>
                        <h4 class="info-card__title">–°–æ–≤–µ—Ç—ã –ø–æ –∞–∫—Ç–∏–≤–∞—Ü–∏–∏</h4>
                    </div>
                    <ul class="info-card__list">
                        <li class="info-card__item">
                            ‚úÖ –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–∞–ø–∫—É ¬´–°–ø–∞–º¬ª ‚Äî –∏–Ω–æ–≥–¥–∞ –ø–∏—Å—å–º–∞ –ø–æ–ø–∞–¥–∞—é—Ç —Ç—É–¥–∞
                        </li>
                        <li class="info-card__item">
                            ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ç—É –∂–µ –ø–æ—á—Ç—É, —á—Ç–æ –∏ –ø—Ä–∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏
                        </li>
                        <li class="info-card__item">
                            ‚úÖ –ü–µ—Ä–µ–π–¥–∏—Ç–µ –ø–æ —Å—Å—ã–ª–∫–µ –≤ —Ç–µ—á–µ–Ω–∏–µ 24 —á–∞—Å–æ–≤ –ø–æ—Å–ª–µ –ø–æ–ª—É—á–µ–Ω–∏—è
                        </li>
                        <li class="info-card__item">
                            ‚úÖ –ï—Å–ª–∏ –ø—Ä–æ–±–ª–µ–º—ã –ø–æ–≤—Ç–æ—Ä—è—é—Ç—Å—è ‚Äî —Å–º–µ–Ω–∏—Ç–µ email –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞
                        </li>
                    </ul>
                </div>
            </div>
        </div>
    </div>
</section>
{% endblock content %}

{% block script %}
<script>
document.addEventListener('DOMContentLoaded', function() {
    // –ê–Ω–∏–º–∞—Ü–∏—è –¥–ª—è –∏–∫–æ–Ω–∫–∏ –æ—à–∏–±–∫–∏
    const errorIcon = document.querySelector('.error-icon');
    if (errorIcon) {
        const ring = errorIcon.querySelector('.error-icon__ring');
        let scale = 1;
        let growing = false;
        
        function animateRing() {
            if (growing) {
                scale += 0.01;
                if (scale >= 1.1) growing = false;
            } else {
                scale -= 0.01;
                if (scale <= 1) growing = true;
            }
            
            ring.style.transform = `scale(${scale})`;
            requestAnimationFrame(animateRing);
        }
        
        animateRing();
    }
    
    // –í–∞–ª–∏–¥–∞—Ü–∏—è email –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
    const emailInput = document.getElementById('email');
    const submitBtn = document.querySelector('.form-submit');
    
    if (emailInput && submitBtn) {
        emailInput.addEventListener('input', function() {
            const email = this.value.trim();
            const isValid = validateEmail(email);
            
            if (email && !isValid) {
                this.classList.add('input-error');
                showFieldError('–í–≤–µ–¥–∏—Ç–µ –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π email –∞–¥—Ä–µ—Å');
            } else {
                this.classList.remove('input-error');
                clearFieldError();
            }
        });
        
        // –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏–µ –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö –æ—Ç–ø—Ä–∞–≤–æ–∫
        const form = document.querySelector('.resend-form');
        form.addEventListener('submit', function(e) {
            const email = emailInput.value.trim();
            if (!validateEmail(email)) {
                e.preventDefault();
                showFieldError('–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤–≤–µ–¥–∏—Ç–µ –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π email');
                return;
            }
            
            submitBtn.disabled = true;
            submitBtn.innerHTML = '<span class="btn__icon">‚è≥</span>–û—Ç–ø—Ä–∞–≤–∫–∞...';
        });
    }
    
    function validateEmail(email) {
        const re = /^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/;
        return re.test(email);
    }
    
    function showFieldError(message) {
        clearFieldError();
        const errorDiv = document.createElement('div');
        errorDiv.className = 'form-field__errors';
        errorDiv.innerHTML = `<span>${message}</span>`;
        emailInput.parentNode.parentNode.appendChild(errorDiv);
    }
    
    function clearFieldError() {
        const existingError = emailInput.parentNode.parentNode.querySelector('.form-field__errors');
        if (existingError) {
            existingError.remove();
        }
    }
    
    // –î–æ–±–∞–≤–ª—è–µ–º –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –∫–∞—Ä—Ç–æ—á–∫–∞–º
    const cards = document.querySelectorAll('.card');
    cards.forEach(card => {
        card.addEventListener('mouseenter', function() {
            this.style.transform = 'translateY(-4px)';
        });
        
        card.addEventListener('mouseleave', function() {
            this.style.transform = 'translateY(0)';
        });
    });
});
</script>
{% endblock script %}

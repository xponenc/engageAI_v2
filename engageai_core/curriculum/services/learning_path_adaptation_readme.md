Oписание логики работы сервиса LearningPathAdaptationService

LearningPathAdaptationService — это мозг навигации по курсу.
Он НЕ проверяет задания, НЕ оценивает навыки и НЕ меняет курс.

Он делает одно:
решает, куда студент пойдёт дальше после урока

Решение принимается строго на основе результата урока, агрегированного по Learning Objectives (LO).

Как он работает — по шагам
Шаг 1. Урок завершён
все задания урока сданы
получена агрегированная оценка по LO
(например: grammar.conditionals = 0.92)

Шаг 2. Анализ Learning Objectives
Каждая цель обучения классифицируется:
mastered
→ цель уверенно освоена
weak
→ цель усвоена частично
problematic
→ цель провалена (критично)

Это единственная аналитика, которую использует сервис.

Шаг 3. Фиксация результата текущего урока
если есть problematic → урок остаётся in_progress
если проблем нет → урок помечается как completed
урок всегда фиксируется, даже если дальше будет откат или remedial

Шаг 4. Выбор сценария (по приоритету)

Сервис проверяет сценарии сверху вниз:
Всё хорошо → идём дальше
Есть провал → remedial
Системный провал → откат уровня
Явно слишком легко → повышение уровня
Ничего не ясно → стоим на месте

выбирается ровно один сценарий

Шаг 5. Мутация LearningPath
В зависимости от сценария сервис:
двигает current_node_index
меняет status у узлов
вставляет новые remedial-узлы

ничего не удаляет
Course, Lesson и Assessment — никогда не меняются

Шаг 6. Возврат результата
Сервис возвращает: LearningPathAdjustmentType

Это используется для:
логов
explainability
teacher dashboard
аналитики
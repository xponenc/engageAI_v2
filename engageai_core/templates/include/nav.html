<nav class="nav">
    <div class="nav__container container">

        <!-- Логотип -->
        <a class="nav__logo" href="/">
            <span class="nav__logo-placeholder">EngageAI</span>
        </a>

        <!-- Меню (десктоп) -->
        <ul class="nav__menu">
            <li class="nav__item"><a href="#" class="nav__link">Обучение</a></li>
            <li class="nav__item"><a href="#" class="nav__link">Практика</a></li>
            <li class="nav__item"><a href="#" class="nav__link">Прогресс</a></li>
            <li class="nav__item"><a href="#" class="nav__link">Материалы</a></li>
        </ul>

        <!-- Правая часть: тема + пользователь -->
        <div class="nav__right">
            <!-- Компактный переключатель тем -->
            <button class="theme-toggle btn_reset" 
                    aria-label="Сменить тему" 
                    title="Включить темную тему (Ctrl+/)">
                <div class="theme-toggle__icon">
                    <!-- Иконка будет меняться через CSS -->
                </div>
            </button>

            <!-- Личный кабинет / Авторизация -->
            <div class="nav__user">
                {% if request.user.is_authenticated %}
                    <a href="{% url 'users:profile' request.user.id %}" class="nav__user-link">
                        {{ request.user.get_full_name|default:request.user.username }}
                    </a>
                    <form action="{% url 'users:logout'%}" method="POST" class="nav__logout-form">
                        {% csrf_token %}
                        <button class="nav__logout-btn" type="submit">Выйти</button>
                    </form>
                {% else %}
                    <a class="nav__user-link" href="{% url 'users:login' %}?next={{request.path}}">Войти</a>
                    <a class="nav__user-btn" href="{% url 'users:sign-up' %}">Регистрация</a>
                {% endif %}
            </div>
        </div>

        <!-- Кнопка бургера -->
        <button class="nav__burger btn_reset" aria-label="Меню">
            <span class="nav__burger-line"></span>
            <span class="nav__burger-line"></span>
            <span class="nav__burger-line"></span>
        </button>

        <!-- Мобильное меню -->
        <div class="nav__mobile">
            <ul class="nav__mobile-menu">
                <li><a href="#" class="nav__mobile-link">Обучение</a></li>
                <li><a href="#" class="nav__mobile-link">Практика</a></li>
                <li><a href="#" class="nav__mobile-link">Прогресс</a></li>
                <li><a href="#" class="nav__mobile-link">Материалы</a></li>

                <hr class="nav__mobile-separator">

                {% if request.user.is_authenticated %}
                    <a href="{% url 'users:profile' request.user.id %}" class="nav__mobile-link">Личный кабинет</a>
                    <form action="{% url 'users:logout'%}" method="POST">
                        {% csrf_token %}
                        <button class="nav__mobile-link" type="submit">Выйти</button>
                    </form>
                {% else %}
                    <a class="nav__mobile-link" href="{% url 'users:login' %}">Войти</a>
                    <a class="nav__mobile-link" href="{% url 'users:sign-up' %}">Регистрация</a>
                {% endif %}
            </ul>
        </div>

    </div>
</nav>
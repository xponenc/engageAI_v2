D:\ML\Projects\Practice\engageAI_v2\engageai_core\curriculum\models\content\course.py
from django.db import models
from django.utils.translation import gettext_lazy as _

from curriculum.models.systematization.learning_objective import LearningObjective
from users.models import CEFRLevel


class Course(models.Model):
    """
    –£—á–µ–±–Ω—ã–π –∫—É—Ä—Å ‚Äî —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å —É—Ä–æ–∫–æ–≤.
    –ú–æ–∂–µ—Ç –±—ã—Ç—å –¥–∏–∞–≥–Ω–æ—Å—Ç–∏—á–µ—Å–∫–∏–º (is_diagnostic=True) –∏–ª–∏ –æ–±—É—á–∞—é—â–∏–º.

    –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:
    - –î–∏–∞–≥–Ω–æ—Å—Ç–∏—á–µ—Å–∫–∏–π –∫—É—Ä—Å: —Å–æ–¥–µ—Ä–∂–∏—Ç 8 –±–ª–æ–∫–æ–≤ –∏–∑ –ø–ª–∞–Ω–∞.
    - –û–±—É—á–∞—é—â–∏–π –∫—É—Ä—Å: —Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –ø—É—Ç—å (–Ω–∞–ø—Ä–∏–º–µ—Ä, "English for Backend Engineers").

    –ü–æ–ª—è:
    - title: –Ω–∞–∑–≤–∞–Ω–∏–µ –∫—É—Ä—Å–∞
    - target_cefr_from/to: –¥–∏–∞–ø–∞–∑–æ–Ω CEFR
    - estimated_duration: –æ–±—â–∞—è –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –≤ –º–∏–Ω—É—Ç–∞—Ö
    - learning_objectives: —Ü–µ–ª–∏, –∫–æ—Ç–æ—Ä—ã–µ –ø–æ–∫—Ä—ã–≤–∞–µ—Ç –∫—É—Ä—Å
    - required_skills: —Å–ø–∏—Å–æ–∫ –Ω–∞–≤—ã–∫–æ–≤/—É—Ä–æ–≤–Ω–µ–π, –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã—Ö –¥–ª—è —Å—Ç–∞—Ä—Ç–∞ (JSON)
    """
    objects = models.Manager()

    title = models.CharField(max_length=200, verbose_name=_("Title"))
    description = models.TextField(verbose_name=_("Description"))
    target_cefr_from = models.CharField(max_length=2, choices=CEFRLevel, verbose_name=_("From CEFR"))
    target_cefr_to = models.CharField(max_length=2, choices=CEFRLevel, verbose_name=_("To CEFR"))
    estimated_duration = models.PositiveIntegerField(
        verbose_name=_("Estimated Duration (minutes)"),
        help_text=_("Total estimated time to complete the course")
    )
    learning_objectives = models.ManyToManyField(LearningObjective, verbose_name=_("Learning Objectives"))
    required_skills = models.JSONField(
        default=list,
        verbose_name=_("Required Skills"),
        help_text=_("e.g., ['grammar:B1', 'listening:A2']")
    )

    created_at = models.DateTimeField(auto_now_add=True)
    updated_at = models.DateTimeField(auto_now=True)
    is_active = models.BooleanField(default=True, verbose_name=_("Is Active"))

    class Meta:
        verbose_name = _("Course")
        verbose_name_plural = _("Courses")

    def __str__(self):
        return f"{self.title} ({self.get_target_cefr_from_display()} ‚Üí {self.get_target_cefr_to_display()})"


#######

D:\ML\Projects\Practice\engageAI_v2\engageai_core\curriculum\models\content\lesson.py
from django.core.validators import MaxValueValidator, MinValueValidator
from django.db import models
from django.utils.translation import gettext_lazy as _

from curriculum.models.content.course import Course
from curriculum.models.systematization.learning_objective import LearningObjective

from curriculum.validators import validate_skill_focus
from users.models import CEFRLevel


class Lesson(models.Model):
    """
    –£—Ä–æ–∫ ‚Äî –ª–æ–≥–∏—á–µ—Å–∫–∞—è –µ–¥–∏–Ω–∏—Ü–∞ –≤–Ω—É—Ç—Ä–∏ –∫—É—Ä—Å–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, "Listening: Stand-up Meetings").

    –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:
    - –°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç –æ–¥–Ω–æ–º—É –∏–∑ 8 –±–ª–æ–∫–æ–≤ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏ –∏–ª–∏ —Ç–µ–º–µ –≤ –æ–±—É—á–µ–Ω–∏–∏.
    - –°–æ–¥–µ—Ä–∂–∏—Ç –∑–∞–¥–∞–Ω–∏—è (Tasks).

    –ü–æ–ª—è:
    - duration_minutes: —Å–∫–æ–ª—å–∫–æ –≤—Ä–µ–º–µ–Ω–∏ –∑–∞–π–º—ë—Ç
    - skill_focus: –Ω–∞–≤—ã–∫–∏, –Ω–∞ –∫–æ—Ç–æ—Ä—ã–µ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω (["listening", "vocabulary"])
    - adaptive_parameters: –ø—Ä–∞–≤–∏–ª–∞ –∞–¥–∞–ø—Ç–∞—Ü–∏–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –ø–æ—Ä–æ–≥–∏ –¥–ª—è —É—Å–ª–æ–∂–Ω–µ–Ω–∏—è)
    """
    objects = models.Manager()

    course = models.ForeignKey(Course, on_delete=models.CASCADE, related_name='lessons', verbose_name=_("Course"))
    title = models.CharField(max_length=200, verbose_name=_("Title"))
    description = models.TextField(verbose_name=_("Description"))
    order = models.PositiveIntegerField(verbose_name=_("Order"))
    content = models.JSONField(
        verbose_name=_("Content"),
        help_text=_("Optional structured lesson instructions or narrative for AI")
    )
    theory_content = models.TextField(
        blank=True,
        verbose_name=_("Theory Content"),
        help_text=_("HTML content with theory and explanations")
    )
    duration_minutes = models.PositiveIntegerField(
        validators=[MinValueValidator(1), MaxValueValidator(120)],
        verbose_name=_("Duration (minutes)")
    )
    required_cefr = models.CharField(max_length=2, choices=CEFRLevel, verbose_name=_("Required CEFR"))
    learning_objectives = models.ManyToManyField(LearningObjective, verbose_name=_("Learning Objectives"))
    skill_focus = models.JSONField(
        default=list,
        validators=[validate_skill_focus],
        verbose_name=_("Skill Focus"),
        help_text=_("e.g., ['listening', 'vocabulary']")
    )
    adaptive_parameters = models.JSONField(
        default=dict,
        verbose_name=_("Adaptive Parameters"),
        help_text=_("e.g., {'min_correct_ratio': 0.7, 'max_items': 10}")
    )
    created_at = models.DateTimeField(auto_now_add=True)
    updated_at = models.DateTimeField(auto_now=True)
    is_active = models.BooleanField(default=True, verbose_name=_("Is Active"))

    class Meta:
        verbose_name = _("Lesson")
        verbose_name_plural = _("Lessons")
        ordering = ['course', 'order']
        indexes = [models.Index(fields=['course', 'order'])]
        unique_together = [['course', 'order']]

    def __str__(self):
        return f"{self.course.title} ‚Üí {self.title}"



#######

D:\ML\Projects\Practice\engageAI_v2\engageai_core\curriculum\models\content\response_format.py
from django.db import models
from django.utils.translation import gettext_lazy as _


class ResponseFormat(models.TextChoices):
    """–¢–∏–ø—ã –æ—Ç–≤–µ—Ç–æ–≤"""

    MULTIPLE_CHOICE = ('multiple_choice', _('Multiple Choice ‚Äì –≤—ã–±–æ—Ä –æ–¥–Ω–æ–≥–æ –∏–ª–∏ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤'))
    SINGLE_CHOICE = ('single_choice', _('Single Choice ‚Äì –≤—ã–±–æ—Ä –æ–¥–Ω–æ–≥–æ –≤–∞—Ä–∏–∞–Ω—Ç–∞'))
    SHORT_TEXT = ('short_text', _('Short Text ‚Äì –∫—Ä–∞—Ç–∫–∏–π —Ç–µ–∫—Å—Ç–æ–≤—ã–π –æ—Ç–≤–µ—Ç, 1‚Äì3 —Å–ª–æ–≤–∞'))
    FREE_TEXT = ('free_text', _('Free Text ‚Äì —Ä–∞–∑–≤—ë—Ä–Ω—É—Ç—ã–π –æ—Ç–≤–µ—Ç, –∞–±–∑–∞—Ü –∏–ª–∏ —Ç–µ–∫—Å—Ç'))
    AUDIO = ('audio', _('Audio ‚Äì –≥–æ–ª–æ—Å–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ'))


#######

D:\ML\Projects\Practice\engageAI_v2\engageai_core\curriculum\models\content\task.py
from django.db import models
from django.utils.translation import gettext_lazy as _

from curriculum.models.content.response_format import ResponseFormat
from curriculum.models.systematization.professional_tag import ProfessionalTag
from users.models import CEFRLevel
from curriculum.models.content.lesson import Lesson
from curriculum.validators import validate_task_content_schema


class TaskType(models.TextChoices):
    """–¢–∏–ø—ã –≤–æ–ø—Ä–æ—Å–æ–≤."""
    GRAMMAR = ('grammar', _('Grammar'))
    VOCABULARY = ('vocabulary', _('Vocabulary'))
    READING = ('reading', _('Reading'))
    LISTENING = ('listening', _('Listening'))
    WRITING = ('writing', _('Writing'))
    SPEAKING = ('speaking', _('Speaking'))


class Task(models.Model):
    """
    –ó–∞–¥–∞–Ω–∏–µ ‚Äî —Å–∞–º–∞—è –º–µ–ª–∫–∞—è –µ–¥–∏–Ω–∏—Ü–∞ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è.
    –ü–æ–ª–Ω–æ—Å—Ç—å—é –ø–æ–∫—Ä—ã–≤–∞–µ—Ç –≤—Å–µ 8 –±–ª–æ–∫–æ–≤ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏.

    –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:
    - –ó–∞–∫—Ä—ã—Ç—ã–µ –≤–æ–ø—Ä–æ—Å—ã: MCQ –ø–æ –≥—Ä–∞–º–º–∞—Ç–∏–∫–µ, reading comprehension.
    - –û—Ç–∫—Ä—ã—Ç—ã–µ: writing warm-up, speaking probe.

    –ö–ª—é—á–µ–≤—ã–µ –ø–æ–ª—è:
    - task_type: —Ç–∏–ø –Ω–∞–≤—ã–∫–∞ (–≥—Ä–∞–º–º–∞—Ç–∏–∫–∞, listening –∏ —Ç.–¥.)
    - response_format: –∫–∞–∫ –æ—Ç–≤–µ—á–∞–µ—Ç —Å—Ç—É–¥–µ–Ω—Ç (–≤—ã–±–æ—Ä, —Ç–µ–∫—Å—Ç, –∞—É–¥–∏–æ)
    - content: —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ (—Å–º. –ø—Ä–∏–º–µ—Ä—ã –Ω–∏–∂–µ)
    - professional_tags: —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ—Å—Ç—å —Ä–æ–ª–∏ —Å—Ç—É–¥–µ–Ω—Ç–∞
    - is_diagnostic: –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ª–∏ –≤ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–µ

    –ü—Ä–∏–º–µ—Ä—ã content:

    1. Multiple Choice (Grammar):
    {
      "prompt": "Which sentence is correct?",
      "options": ["I have went...", "I went...", "I have go..."],
      "correct_idx": 1,
      "explanation": "Past Simple for completed past actions."
    }

    2. Short Text (Listening):
    {
      "prompt": "What was the main issue mentioned in the audio?",
      "correct": ["deployment failed", "build error"],
      "case_sensitive": false
    }

    3. Free Text (Writing Warm-up):
    {
      "prompt": "What did you do at work yesterday?",
      "max_length_words": 50,
      "expected_skills": ["past_simple", "work_vocabulary"]
    }

    4. Audio (Speaking):
    {
      "prompt": "Record 20‚Äì30 seconds about your current task.",
      "max_duration_sec": 30
    }
    """
    objects = models.Manager()

    lesson = models.ForeignKey(Lesson, on_delete=models.CASCADE, null=True, blank=True, verbose_name=_("Lesson"),
                               related_name="tasks")
    task_type = models.CharField(max_length=20, choices=TaskType, verbose_name=_("Task Type"))
    response_format = models.CharField(max_length=20, choices=ResponseFormat, verbose_name=_("Response Format"))
    content = models.JSONField(verbose_name=_("Content"))
    # —Å—Ö–µ–º–∞ –∑–∞–¥–∞–µ—Ç—Å—è –≤ engageai_core/curriculum/schemas.py:TASK_CONTENT_SCHEMAS
    content_schema_version = models.CharField(default="v1", verbose_name=_("Content Schema"))
    difficulty_cefr = models.CharField(max_length=2, choices=CEFRLevel, verbose_name=_("Difficulty CEFR"))
    is_diagnostic = models.BooleanField(default=False, verbose_name=_("Used in Diagnostic"))
    professional_tags = models.ManyToManyField(ProfessionalTag, blank=True, verbose_name=_("Professional Tags"))
    is_active = models.BooleanField(default=True, verbose_name=_("–ó–∞–¥–∞–Ω–∏–µ –∞–∫—Ç—É–∞–ª—å–Ω–æ"))
    order = models.PositiveIntegerField(
        default=0,
        verbose_name=_("–ü–æ—Ä—è–¥–æ–∫ –∑–∞–¥–∞—á–∏ –≤ —É—Ä–æ–∫–µ"),
        help_text=_("–ü–æ—Ä—è–¥–æ–∫ –∑–∞–¥–∞–Ω–∏—è –≤ —É—Ä–æ–∫–µ (—á–µ–º –º–µ–Ω—å—à–µ —á–∏—Å–ª–æ, —Ç–µ–º —Ä–∞–Ω—å—à–µ –∑–∞–¥–∞–Ω–∏–µ)")
    )

    created_at = models.DateTimeField(auto_now_add=True)

    class Meta:
        verbose_name = _("Task")
        verbose_name_plural = _("Tasks")
        ordering = ['lesson', 'order']
        indexes = [
            models.Index(fields=['lesson', 'order']),
            models.Index(fields=['task_type']),
            models.Index(fields=['response_format']),
            models.Index(fields=['lesson', 'is_active', 'order'],
                         name='task_lesson_active_order_idx'),
        ]

    def __str__(self):
        return f"{self.get_task_type_display()} ({self.get_response_format_display()}) ‚Äî {self.difficulty_cefr}"

    def clean(self):
        validate_task_content_schema(
            self.content,
            self.content_schema_version
        )

    def save(self, *args, **kwargs):
        """–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø–æ—Ä—è–¥–∫–∞ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏"""
        if not self.pk and self.order == 0:
            # –ü–æ–ª—É—á–∞–µ–º –º–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π order –≤ —ç—Ç–æ–º —É—Ä–æ–∫–µ –∏ –¥–æ–±–∞–≤–ª—è–µ–º 1
            max_order = Task.objects.filter(lesson=self.lesson).aggregate(
                max_order=models.Max('order')
            )['max_order'] or 0
            self.order = max_order + 1
        super().save(*args, **kwargs)


#######

D:\ML\Projects\Practice\engageAI_v2\engageai_core\curriculum\models\content\task_media.py
from django.db import models
from django.utils.translation import gettext_lazy as _

from curriculum.models.content.task import Task


class MediaType(models.TextChoices):
    """–¢–∏–ø –º–µ–¥–∏–∞ —Ñ–∞–π–ª–∞"""

    TEXT = ('text', _('Raw text snippet or prompt'))
    AUDIO = ('audio', _('Audio file (e.g., MP3, WAV)'))
    VIDEO = ('video', _('Video file (e.g AVI, MP4)'))
    IMAGE = ('image', _('Image (e.g., diagram, screenshot)'))
    DOC = ('document', _('PDF, DOC, or other document'))


class TaskMedia(models.Model):
    """
    –ú–µ–¥–∏–∞—Ñ–∞–π–ª, –ø—Ä–∏–∫—Ä–µ–ø–ª—ë–Ω–Ω—ã–π –∫ –∑–∞–¥–∞–Ω–∏—é.

    –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:
    - –ê—É–¥–∏–æ –¥–ª—è listening (–±–ª–æ–∫ 6),
    - –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –¥–ª—è reading (–Ω–∞–ø—Ä–∏–º–µ—Ä, —Å–∫—Ä–∏–Ω —Ç–∏–∫–µ—Ç–∞),
    - –¢–µ–∫—Å—Ç–æ–≤—ã–π —Ñ—Ä–∞–≥–º–µ–Ω—Ç.

    –ü–æ–ª—è:
    - file: –ø—É—Ç—å –∫ —Ñ–∞–π–ª—É
    - media_type: —Ç–∏–ø –∫–æ–Ω—Ç–µ–Ω—Ç–∞
    - order: –ø–æ—Ä—è–¥–æ–∫, –µ—Å–ª–∏ —Ñ–∞–π–ª–æ–≤ –Ω–µ—Å–∫–æ–ª—å–∫–æ
    """
    task = models.ForeignKey(Task, on_delete=models.CASCADE, related_name='media_files', verbose_name=_("Task"))
    file = models.FileField(upload_to='task_media/', verbose_name=_("File"))
    media_type = models.CharField(max_length=20, choices=MediaType, verbose_name=_("Media Type"))
    order = models.PositiveSmallIntegerField(default=0, verbose_name=_("Order"))

    class Meta:
        verbose_name = _("Task Media")
        verbose_name_plural = _("Task Media")
        indexes = [
            models.Index(fields=['task']),
            models.Index(fields=['media_type']),
        ]

    def __str__(self):
        return f"{self.get_media_type_display()} for {self.task}"


#######

D:\ML\Projects\Practice\engageAI_v2\engageai_core\curriculum\models\learning_process\learning_path.py
from django.db import models
from django.utils.translation import gettext_lazy as _
from django.utils import timezone


class LearningPath(models.Model):
    """
    –ü–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —É—á–µ–±–Ω—ã–π –ø—É—Ç—å —Å—Ç—É–¥–µ–Ω—Ç–∞ –≤ —Ä–∞–º–∫–∞—Ö –∑–∞—á–∏—Å–ª–µ–Ω–∏—è.

    –ó–∞–º–µ–Ω—è–µ—Ç –∂—ë—Å—Ç–∫—É—é –ª–∏–Ω–µ–π–Ω—É—é –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å (current_lesson).
    –ü–æ–∑–≤–æ–ª—è–µ—Ç:
    - –õ–∏–Ω–µ–π–Ω—ã–µ –ø—É—Ç–∏ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –¥–ª—è MVP)
    - –ê–¥–∞–ø—Ç–∏–≤–Ω—ã–µ –ø—É—Ç–∏ —Å –≤–µ—Ç–≤–ª–µ–Ω–∏—è–º–∏ –∏ remedial —É—Ä–æ–∫–∞–º–∏
    - AI-–≥–µ–Ω–µ—Ä–∞—Ü–∏—é –ø—É—Ç–∏ (GPT-4o-mini –Ω–∞ –æ—Å–Ω–æ–≤–µ –ø—Ä–æ—Ñ–∏–ª—è + SkillDelta)
    """

    enrollment = models.OneToOneField(
        "Enrollment",
        on_delete=models.CASCADE,
        related_name="learning_path",
        verbose_name=_("–ó–∞—á–∏—Å–ª–µ–Ω–∏–µ"),
        help_text=_("–û–¥–∏–Ω –ø—É—Ç—å –Ω–∞ –æ–¥–Ω–æ –∑–∞—á–∏—Å–ª–µ–Ω–∏–µ")
    )

    path_type = models.CharField(
        max_length=20,
        choices=[
            ("LINEAR", _("–õ–∏–Ω–µ–π–Ω—ã–π (–ø–æ –ø–æ—Ä—è–¥–∫—É —É—Ä–æ–∫–æ–≤ –∫—É—Ä—Å–∞)")),
            ("ADAPTIVE", _("–ê–¥–∞–ø—Ç–∏–≤–Ω—ã–π (—Å –≤–µ—Ç–≤–ª–µ–Ω–∏—è–º–∏ –ø–æ SkillDelta)")),
            ("PERSONALIZED", _("–ü–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π (AI-–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –ø–æ–¥ —Ü–µ–ª–∏/–ø—Ä–æ—Ñ–µ—Å—Å–∏—é)")),
        ],
        default="LINEAR",
        verbose_name=_("–¢–∏–ø –ø—É—Ç–∏")
    )

    # JSON-—Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—É—Ç–∏: —Å–ø–∏—Å–æ–∫ —É–∑–ª–æ–≤ —Å —É—Å–ª–æ–≤–∏—è–º–∏
    nodes = models.JSONField(
        verbose_name=_("–£–∑–ª—ã –ø—É—Ç–∏"),
        default=list,
        help_text=_("""
        –ü—Ä–∏–º–µ—Ä —Å—Ç—Ä—É–∫—Ç—É—Ä—ã:
        [
            {
                "node_id": 1,
                "lesson_id": 5,
                "title": "Grammar: Present Simple",
                "prerequisites": [], 
                "triggers": [
                    {"condition": "skill_delta.speaking < 0", "action": "add_remedial", "remedial_lesson_id": 12}
                ],
                "status": "completed",  // in_progress, locked, recommended
                "completed_at": "2025-12-28T15:30:00Z"
            },
            ...
        ]
        """)
    )

    current_node_index = models.PositiveIntegerField(
        default=0,
        verbose_name=_("–ò–Ω–¥–µ–∫—Å —Ç–µ–∫—É—â–µ–≥–æ —É–∑–ª–∞"),
        help_text=_("–ü–æ–∑–∏—Ü–∏—è –≤ –º–∞—Å—Å–∏–≤–µ nodes")
    )

    generated_at = models.DateTimeField(
        default=timezone.now,
        verbose_name=_("–í—Ä–µ–º—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –ø—É—Ç–∏")
    )

    updated_at = models.DateTimeField(
        auto_now=True,
        verbose_name=_("–í—Ä–µ–º—è –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è")
    )

    metadata = models.JSONField(
        default=dict,
        blank=True,
        verbose_name=_("–ú–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ"),
        help_text=_(
            "e.g., {'generated_by': 'gpt-4o-mini', 'based_on_profile': {'level': 'B1', 'goal': 'IT_interview'}}")
    )

    class Meta:
        verbose_name = _("–£—á–µ–±–Ω—ã–π –ø—É—Ç—å")
        verbose_name_plural = _("–£—á–µ–±–Ω—ã–µ –ø—É—Ç–∏")

    def __str__(self):
        return f"{self.enrollment.student} ‚Äî {self.get_path_type_display()} –ø—É—Ç—å –≤ –∫—É—Ä—Å–µ {self.enrollment.course.title}"

    @property
    def current_node(self):
        """–¢–µ–∫—É—â–∏–π —É–∑–µ–ª –¥–ª—è —É–¥–æ–±—Å—Ç–≤–∞ –≤ —Å–µ—Ä–≤–∏—Å–∞—Ö –∏ views"""
        if self.nodes and self.current_node_index < len(self.nodes):
            return self.nodes[self.current_node_index]
        return None

    @property
    def next_node(self):
        """–°–ª–µ–¥—É—é—â–∏–π —É–∑–µ–ª (–¥–ª—è preview –≤ –±–æ—Ç–µ –∏ –¥–∞—à–±–æ—Ä–¥–µ)"""
        next_index = self.current_node_index + 1
        if next_index < len(self.nodes):
            return self.nodes[next_index]
        return None

    def advance_to_next_node(self):
        """–ü–µ—Ä–µ—Ö–æ–¥ –∫ —Å–ª–µ–¥—É—é—â–µ–º—É —É–∑–ª—É –ø–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è —É—Ä–æ–∫–∞"""
        if self.current_node_index + 1 < len(self.nodes):
            self.current_node_index += 1
            self.save(update_fields=["current_node_index", "updated_at"])

#######

D:\ML\Projects\Practice\engageAI_v2\engageai_core\curriculum\models\learning_process\lesson_event_log.py
from django.db import models
from django.utils import timezone
from django.utils.translation import gettext_lazy as _
from django.contrib.auth import get_user_model

from curriculum.models.content.lesson import Lesson
from curriculum.models.student.enrollment import Enrollment
from users.models import Student

User = get_user_model()


class LessonEventType(models.TextChoices):
    """
    –¢–∏–ø—ã —Å–æ–±—ã—Ç–∏–π —É—Ä–æ–∫–∞ ‚Äî –æ—Å–Ω–æ–≤–∞ –¥–ª—è —Å–æ–±—ã—Ç–∏–π–Ω–æ–≥–æ –ø–æ–¥—Ö–æ–¥–∞.
    –†–∞—Å—à–∏—Ä—è–µ–º–æ –ø–æ–¥ –±—É–¥—É—â–∏–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏ (PAUSE, RESUME, ABANDON).
    """
    START = "START", _("–ù–∞—á–∞–ª–æ —É—Ä–æ–∫–∞")
    COMPLETE = "COMPLETE", _("–ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ —É—Ä–æ–∫–∞")
    PAUSE = "PAUSE", _("–ü–∞—É–∑–∞ –≤ —É—Ä–æ–∫–µ")
    RESUME = "RESUME", _("–í–æ–∑–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —É—Ä–æ–∫–∞")
    ABANDON = "ABANDON", _("–ü–æ–∫–∏–Ω—É–ª —É—Ä–æ–∫ –±–µ–∑ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è")
    ASSESSMENT_START = "ASSESSMENT_START", _("–ù–∞—á–∞–ª–æ –æ—Ü–µ–Ω–∫–∏ —É—Ä–æ–∫–∞")
    ASSESSMENT_COMPLETE = "ASSESSMENT_COMPLETE", _("–ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ –æ—Ü–µ–Ω–∫–∏ —É—Ä–æ–∫–∞")


class LessonEventLog(models.Model):
    """
    –õ–æ–≥ —Å–æ–±—ã—Ç–∏–π —É—Ä–æ–∫–∞ –¥–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ —Å—Ç—É–¥–µ–Ω—Ç–∞ –≤ —Ä–∞–º–∫–∞—Ö –∑–∞—á–∏—Å–ª–µ–Ω–∏—è.

    –ö–ª—é—á–µ–≤—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏:
    - –§–∏–∫—Å–∞—Ü–∏—è —Ç–æ—á–Ω–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏ –Ω–∞—á–∞–ª–∞/–∑–∞–≤–µ—Ä—à–µ–Ω–∏—è —É—Ä–æ–∫–∞
    - –†–∞—Å—á—ë—Ç –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –∑–∞–Ω—è—Ç–∏—è (duration_minutes)
    - –û—Å–Ω–æ–≤–∞ –¥–ª—è streaks, –≥–µ–π–º–∏—Ñ–∏–∫–∞—Ü–∏–∏ (–±–∞–ª–ª—ã –∑–∞ timely completion)
    - –ê–Ω–∞–ª–∏—Ç–∏–∫–∞ –≤–æ–≤–ª–µ—á—ë–Ω–Ω–æ—Å—Ç–∏ (drop-off –Ω–∞ PAUSE/ABANDON)
    - –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –º–µ–∂–¥—É –≤–µ–± –∏ Telegram-–±–æ—Ç–æ–º
    - –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å AI: —Ç—Ä–∏–≥–≥–µ—Ä –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ nudges –ø—Ä–∏ ABANDON > 24h
    """

    student = models.ForeignKey(
        Student,
        on_delete=models.CASCADE,
        verbose_name=_("–°—Ç—É–¥–µ–Ω—Ç"),
        related_name="lesson_events",
        help_text=_("–°—Å—ã–ª–∫–∞ –Ω–∞ –ø—Ä–æ—Ñ–∏–ª—å —Å—Ç—É–¥–µ–Ω—Ç–∞ —Å —É—Ä–æ–≤–Ω–µ–º, —Ü–µ–ª—è–º–∏ –∏ –ø—Ä–æ—Ñ–µ—Å—Å–∏–µ–π")
    )

    enrollment = models.ForeignKey(
        Enrollment,
        on_delete=models.CASCADE,
        verbose_name=_("–ó–∞—á–∏—Å–ª–µ–Ω–∏–µ"),
        related_name="lesson_events",
        help_text=_("–ö–æ–Ω—Ç–µ–∫—Å—Ç –∫—É—Ä—Å–∞ –∏ —Ç–µ–∫—É—â–µ–≥–æ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞")
    )

    lesson = models.ForeignKey(
        Lesson,
        on_delete=models.CASCADE,
        verbose_name=_("–£—Ä–æ–∫"),
        related_name="events",
        null=True,
        blank=True,
        help_text=_("–ö–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π —É—Ä–æ–∫, –∫ –∫–æ—Ç–æ—Ä–æ–º—É –æ—Ç–Ω–æ—Å–∏—Ç—Å—è —Å–æ–±—ã—Ç–∏–µ")
    )

    event_type = models.CharField(
        max_length=32,
        choices=LessonEventType.choices,
        verbose_name=_("–¢–∏–ø —Å–æ–±—ã—Ç–∏—è")
    )

    timestamp = models.DateTimeField(
        default=timezone.now,
        verbose_name=_("–í—Ä–µ–º—è —Å–æ–±—ã—Ç–∏—è"),
        db_index=True  # –î–ª—è –±—ã—Å—Ç—Ä–æ–π –∞–Ω–∞–ª–∏—Ç–∏–∫–∏ –ø–æ –≤—Ä–µ–º–µ–Ω–∏
    )

    channel = models.CharField(
        max_length=20,
        choices=[
            ("WEB", _("–í–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ")),
            ("BOT", _("Telegram-–±–æ—Ç")),
            ("API", _("–í–Ω–µ—à–Ω–∏–π API")),
        ],
        default="WEB",
        verbose_name=_("–ö–∞–Ω–∞–ª"),
        help_text=_("–û—Ç–∫—É–¥–∞ –ø—Ä–∏—à–ª–æ —Å–æ–±—ã—Ç–∏–µ ‚Äî –¥–ª—è –∫—Ä–æ—Å—Å-–∫–∞–Ω–∞–ª—å–Ω–æ–π –∞–Ω–∞–ª–∏—Ç–∏–∫–∏")
    )

    duration_minutes = models.DecimalField(
        max_digits=6,
        decimal_places=2,
        null=True,
        blank=True,
        verbose_name=_("–î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å (–º–∏–Ω)"),
        help_text=_("–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è –¥–ª—è COMPLETE –ø–æ —Ä–∞–∑–Ω–∏—Ü–µ —Å START")
    )

    metadata = models.JSONField(
        default=dict,
        blank=True,
        verbose_name=_("–ú–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ"),
        help_text=_("–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ: e.g., {'completed_tasks': 8, 'total_tasks': 10, 'score': 0.92}")
    )

    created_at = models.DateTimeField(auto_now_add=True)
    updated_at = models.DateTimeField(auto_now=True)

    class Meta:
        verbose_name = _("–°–æ–±—ã—Ç–∏–µ —É—Ä–æ–∫–∞")
        verbose_name_plural = _("–°–æ–±—ã—Ç–∏—è —É—Ä–æ–∫–æ–≤")
        ordering = ["-timestamp"]
        indexes = [
            models.Index(fields=["student", "-timestamp"]),
            models.Index(fields=["enrollment", "lesson"]),
            models.Index(fields=["event_type", "timestamp"]),
            models.Index(fields=["channel"]),
        ]

    def __str__(self):
        return f"{self.student} ‚Äî {self.get_event_type_display()} ‚Äî {self.lesson.title} [{self.timestamp:%Y-%m-%d %H:%M}]"

    def save(self, *args, **kwargs):
        """
        –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Ä–∞—Å—á—ë—Ç duration_minutes –ø—Ä–∏ COMPLETE.
        """
        if self.event_type == LessonEventType.COMPLETE and not self.duration_minutes:
            start_event = LessonEventLog.objects.filter(
                student=self.student,
                enrollment=self.enrollment,
                lesson=self.lesson,
                event_type=LessonEventType.START
            ).order_by("-timestamp").first()

            if start_event:
                duration = (self.timestamp - start_event.timestamp).total_seconds() / 60
                self.duration_minutes = round(duration, 2)

        super().save(*args, **kwargs)

    @staticmethod
    def create_event(student, enrollment, lesson, event_type, channel="WEB", metadata=None):
        return LessonEventLog.objects.create(
            student=student,
            enrollment=enrollment,
            lesson=lesson,
            event_type=event_type,
            channel=channel,
            metadata=metadata or {}
        )

#######

D:\ML\Projects\Practice\engageAI_v2\engageai_core\curriculum\models\student\enrollment.py
from django.db import models
from django.db.models.signals import post_save
from django.dispatch import receiver
from django.utils import timezone
from django.utils.translation import gettext_lazy as _

from curriculum.models.content.course import Course
from curriculum.models.content.lesson import Lesson
from curriculum.models.content.task import Task
from curriculum.models.learning_process.learning_path import LearningPath
from curriculum.models.learning_process.path_generation_service import PathGenerationService
from curriculum.models.skills.skill_snapshot import SkillSnapshot
from users.models import Student


class Enrollment(models.Model):
    """
    –ó–∞—á–∏—Å–ª–µ–Ω–∏–µ —Å—Ç—É–¥–µ–Ω—Ç–∞ –Ω–∞ –∫—É—Ä—Å —Å –ø–æ–ª–Ω—ã–º –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ–º –ø—Ä–æ–≥—Ä–µ—Å—Å–∞.
    """
    objects = models.Manager()

    LESSON_STATUS_CHOICES = [
        ('ACTIVE', 'Active'),
        ('COMPLETED_TASKS', 'All tasks completed'),
        ('PENDING_ASSESSMENT', 'Pending assessment'),
        ('ASSESSMENT_ERROR', 'Assessment error'),
        ('COMPLETED', 'Lesson completed')
    ]

    student = models.ForeignKey(Student, on_delete=models.CASCADE, verbose_name=_("Student"))
    course = models.ForeignKey(Course, on_delete=models.CASCADE, verbose_name=_("Course"))
    adaptive_path_enabled = models.BooleanField(default=False, verbose_name=_("–ê–¥–∞–ø—Ç–∏–≤–Ω—ã–π –ø—É—Ç—å –∞–∫—Ç–∏–≤–µ–Ω"))
    started_at = models.DateTimeField(auto_now_add=True, verbose_name=_("Started At"))
    completed_at = models.DateTimeField(null=True, blank=True, verbose_name=_("Completed At"))

    # –¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –æ–±—É—á–µ–Ω–∏—è
    current_lesson = models.ForeignKey(
        Lesson,
        on_delete=models.SET_NULL,
        null=True,
        blank=True,
        verbose_name=_("Current Lesson"),
        related_name="active_enrollments"
    )

    # # –ü—Ä–æ–≥—Ä–µ—Å—Å –∏ —Å–æ—Å—Ç–æ—è–Ω–∏–µ
    # progress_snapshot = models.ForeignKey(
    #     SkillSnapshot,
    #     on_delete=models.SET_NULL,
    #     null=True,
    #     blank=True,
    #     verbose_name=_("Progress Snapshot"),
    #     help_text=_("–ü–æ—Å–ª–µ–¥–Ω–∏–π –∑–∞—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Å–Ω–∏–º–æ–∫ –Ω–∞–≤—ã–∫–æ–≤")
    # )

    lesson_status = models.CharField(
        max_length=20,
        choices=LESSON_STATUS_CHOICES,
        default='ACTIVE',
        verbose_name=_("Lesson Status")
    )
    assessment_job_id = models.CharField(
        max_length=255,
        blank=True,
        null=True,
        verbose_name=_("Assessment Job ID")
    )
    assessment_started_at = models.DateTimeField(
        null=True,
        blank=True,
        verbose_name=_("Assessment Started At")
    )
    is_active = models.BooleanField(default=True, verbose_name=_("Is Active"))
    last_activity = models.DateTimeField(auto_now=True, verbose_name=_("Last Activity"))

    class Meta:
        verbose_name = _("Enrollment")
        verbose_name_plural = _("Enrollments")
        indexes = [
            models.Index(fields=['student', 'course']),
            models.Index(fields=['is_active']),
            models.Index(fields=['last_activity']),
            models.Index(fields=['lesson_status']),
            models.Index(fields=['assessment_job_id'])
        ]
        constraints = [
            models.UniqueConstraint(
                fields=['student', 'course', 'is_active'],
                condition=models.Q(is_active=True),
                name='unique_active_enrollment'
            )
        ]

    def __str__(self):
        status = "active" if self.is_active else "completed"
        return f"{self.student} ‚Üí {self.course} ({status})"

    def complete(self):
        """–ó–∞–≤–µ—Ä—à–∞–µ—Ç –∑–∞—á–∏—Å–ª–µ–Ω–∏–µ"""
        self.is_active = False
        self.completed_at = timezone.now()
        self.save(update_fields=['is_active', 'completed_at'])

    @receiver(post_save, sender="curriculum.Enrollment")
    def generate_initial_learning_path(sender, instance, created, **kwargs):
        """
        –°–∏–≥–Ω–∞–ª: –ø–æ—Å–ª–µ —Å–æ–∑–¥–∞–Ω–∏—è –Ω–æ–≤–æ–≥–æ Enrollment –≥–µ–Ω–µ—Ä–∏—Ä—É–µ–º –ø–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –ø—É—Ç—å.
        –ü–æ–ª–Ω–æ—Å—Ç—å—é –Ω–µ–∑–∞–≤–∏—Å–∏–º –æ—Ç current_lesson ‚Äî –≤—Å—è –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—è —á–µ—Ä–µ–∑ LearningPath.
        """
        if not created:
            return  # –¢–æ–ª—å–∫–æ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏

        # –°–æ–∑–¥–∞—ë–º –∏–ª–∏ –ø–æ–ª—É—á–∞–µ–º LearningPath
        path, created_path = LearningPath.objects.get_or_create(enrollment=instance)

        # –ü—ã—Ç–∞–µ–º—Å—è —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –ø–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –ø—É—Ç—å —á–µ—Ä–µ–∑ AI
        try:
            updated_path = PathGenerationService.generate_personalized_path(instance)
            path_type = updated_path.path_type
        except Exception as e:
            # Fallback –Ω–∞ –ª–∏–Ω–µ–π–Ω—ã–π –ø—É—Ç—å –ø—Ä–∏ –ª—é–±–æ–π –æ—à–∏–±–∫–µ (LLM –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω, —Ç–∞–π–º–∞—É—Ç –∏ —Ç.–¥.)
            updated_path = PathGenerationService.generate_linear_fallback(instance)
            path_type = "LINEAR (fallback)"

        # –£–±–µ–∂–¥–∞–µ–º—Å—è, —á—Ç–æ –ø–µ—Ä–≤—ã–π —É–∑–µ–ª ‚Äî in_progress
        if updated_path.nodes:
            updated_path.nodes[0]["status"] = "in_progress"
            updated_path.current_node_index = 0
            updated_path.save()

        # –õ–æ–≥–∏—Ä—É–µ–º –≤ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ –¥–ª—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∏
        path.metadata.update({
            "initial_generation": timezone.now().isoformat(),
            "path_type": path_type,
            "nodes_count": len(updated_path.nodes),
            "fallback_used": path_type.startswith("LINEAR")
        })
        path.save()


#######

D:\ML\Projects\Practice\engageAI_v2\engageai_core\curriculum\models\student\skill_delta.py
from django.db import models

from users.models import Student

from django.utils.translation import gettext_lazy as _


class SkillDelta(models.Model):
    student = models.ForeignKey(Student, on_delete=models.CASCADE, related_name="skill_deltas")
    enrollment = models.ForeignKey("Enrollment", on_delete=models.CASCADE, related_name="skill_deltas")
    lesson = models.ForeignKey("Lesson", on_delete=models.CASCADE, related_name="skill_deltas")

    pre_snapshot = models.ForeignKey(
        "SkillSnapshot", on_delete=models.SET_NULL, null=True, related_name="deltas_as_pre"
    )
    post_snapshot = models.ForeignKey(
        "SkillSnapshot", on_delete=models.SET_NULL, null=True, related_name="deltas_as_post"
    )

    deltas = models.JSONField(
        help_text=_("{'grammar': +0.10, 'speaking': -0.03, 'overall': +0.08}")
    )

    calculated_at = models.DateTimeField(auto_now_add=True)
    metadata = models.JSONField(default=dict, blank=True)

    class Meta:
        unique_together = ["student", "lesson"]

    def __str__(self):
        return f"{self.student} ‚Äî –£—Ä–æ–∫ {self.lesson.order} ‚Äî Œî {self.deltas.get('overall', 0):+.2f}"

#######

D:\ML\Projects\Practice\engageAI_v2\engageai_core\curriculum\models\student\skill_snapshot.py
from django.db import models

from users.models import Student

from django.utils.translation import gettext_lazy as _


class SkillSnapshot(models.Model):
    """
    –°–Ω–∏–º–æ–∫ –Ω–∞–≤—ã–∫–æ–≤ —Å—Ç—É–¥–µ–Ω—Ç–∞ –Ω–∞ –æ–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω—ã–π –º–æ–º–µ–Ω—Ç –≤—Ä–µ–º–µ–Ω–∏.
    """
    objects = models.Manager()

    student = models.ForeignKey(
        Student,
        on_delete=models.CASCADE,
        related_name="skill_snapshots",
        verbose_name=_("–°—Ç—É–¥–µ–Ω—Ç")
    )

    enrollment = models.ForeignKey(
        "Enrollment",
        on_delete=models.CASCADE,
        related_name="skill_snapshots",
        verbose_name=_("–ó–∞—á–∏—Å–ª–µ–Ω–∏–µ"),
        help_text=_("–ö–æ–Ω—Ç–µ–∫—Å—Ç –∫—É—Ä—Å–∞ –¥–ª—è –∞–¥–∞–ø—Ç–∏–≤–Ω—ã—Ö –º–∞—Ä—à—Ä—É—Ç–æ–≤"),
    )

    associated_lesson = models.ForeignKey(
        "Lesson",
        on_delete=models.SET_NULL,
        null=True,
        blank=True,
        related_name="skill_snapshots",
        verbose_name=_("–°–≤—è–∑–∞–Ω–Ω—ã–π —É—Ä–æ–∫"),
        help_text="–£—Ä–æ–∫, –ø–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –∫–æ—Ç–æ—Ä–æ–≥–æ —Å–¥–µ–ª–∞–Ω —Å–Ω–∏–º–æ–∫ (POST). –î–ª—è PRE –∏—Å–ø–æ–ª—å–∑—É–µ–º —É—Ä–æ–∫,"
                  " –∫–æ—Ç–æ—Ä—ã–π —Å—Ç—É–¥–µ–Ω—Ç —Å–æ–±–∏—Ä–∞–µ—Ç—Å—è –Ω–∞—á–∞—Ç—å."
    )

    snapshot_context = models.CharField(
        max_length=20,
        choices=[
            ("POST_LESSON", _("–ü–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è —É—Ä–æ–∫–∞")),
            ("PLACEMENT", _("–†–µ–∑—É–ª—å—Ç–∞—Ç placement test")),
            ("WEEKLY_SUMMARY", _("–ï–∂–µ–Ω–µ–¥–µ–ª—å–Ω—ã–π")),
            ("MANUAL", _("–†—É—á–Ω–æ–π")),
        ],
        default="POST_LESSON",
        verbose_name=_("–ö–æ–Ω—Ç–µ–∫—Å—Ç —Å–Ω–∏–º–∫–∞")
    )
    grammar = models.FloatField(default=0.0)
    vocabulary = models.FloatField(default=0.0)
    listening = models.FloatField(default=0.0)
    reading = models.FloatField(default=0.0)
    writing = models.FloatField(default=0.0)
    speaking = models.FloatField(default=0.0)

    skills = models.JSONField(
        verbose_name=_("–ù–∞–≤—ã–∫–∏"),
        default=dict,
        help_text=_("{'grammar': 0.85, 'vocabulary': 0.78, 'speaking': 0.65, 'listening': 0.82, ...} ‚Äî 0.0‚Äì1.0")

    )

    snapshot_at = models.DateTimeField(auto_now_add=True)

    metadata = models.JSONField(
        default=dict,
        blank=True,
        verbose_name=_("–ú–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ"),
        help_text=_("e.g., {'source': 'assessment', 'lesson_score': 0.92, 'tasks_completed': 10}")
    )

    class Meta:
        verbose_name = _("–°–Ω–∏–º–æ–∫ –Ω–∞–≤—ã–∫–æ–≤")
        verbose_name_plural = _("–°–Ω–∏–º–∫–∏ –Ω–∞–≤—ã–∫–æ–≤")
        ordering = ["-snapshot_at"]
        indexes = [
            models.Index(fields=["student", "-snapshot_at"]),
            models.Index(fields=["enrollment", "associated_lesson"]),
            models.Index(fields=["snapshot_context"]),
        ]
        unique_together = ["enrollment", "associated_lesson"]  # –û–¥–∏–Ω POST-—Å–Ω–∏–º–æ–∫ –Ω–∞ —É—Ä–æ–∫

    def to_dict(self):
        return {
            'grammar': self.grammar,
            'vocabulary': self.vocabulary,
            'listening': self.listening,
            'reading': self.reading,
            'writing': self.writing,
            'speaking': self.speaking,
            'metadata': self.metadata,
        }

    def __str__(self) -> str:
        return f"SkillSnapshot({self.student}, {self.snapshot_at})"


#######

D:\ML\Projects\Practice\engageAI_v2\engageai_core\curriculum\models\student\student_response.py
from django.db import models
from django.utils.translation import gettext_lazy as _

from curriculum.models.content.task import Task
from users.models import Student


class StudentTaskResponse(models.Model):
    """
    –û—Ç–≤–µ—Ç —Å—Ç—É–¥–µ–Ω—Ç–∞ –Ω–∞ –∑–∞–¥–∞–Ω–∏–µ.

    –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:
    - –•—Ä–∞–Ω–∏—Ç –∫–∞–∫ —Ç–µ–∫—Å—Ç, —Ç–∞–∫ –∏ –∞—É–¥–∏–æ.
    - –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –∏ LLM-–æ—Ü–µ–Ω–∫–∏.

    –ü–æ–ª—è:
    - response_text: –¥–ª—è writing, short_text
    - audio_file: –¥–ª—è speaking
    - is_correct: True/False –¥–ª—è –∑–∞–∫—Ä—ã—Ç—ã—Ö, None –¥–ª—è –æ—Ç–∫—Ä—ã—Ç—ã—Ö
    """
    student = models.ForeignKey(Student, on_delete=models.CASCADE, verbose_name=_("Student"))
    task = models.ForeignKey(Task, on_delete=models.CASCADE, verbose_name=_("Task"), related_name="student_response")
    response_text = models.TextField(blank=True, verbose_name=_("Text Response"))
    audio_file = models.FileField(upload_to='responses/', blank=True, null=True, verbose_name=_("Audio Response"))
    transcript = models.TextField(blank=True, null=True, verbose_name=_("Audio Transcript"))
    submitted_at = models.DateTimeField(auto_now_add=True, verbose_name=_("Submitted At"))

    class Meta:
        verbose_name = _("Student Task Response")
        verbose_name_plural = _("Student Task Responses")
        indexes = [
            models.Index(fields=['student', 'task'],
                         name='response_student_task_idx'),
            models.Index(fields=['task']),
            models.Index(fields=['submitted_at']),
        ]

    def __str__(self):
        return f"Response by {self.student} to {self.task}"


#######

D:\ML\Projects\Practice\engageAI_v2\engageai_core\curriculum\models\systematization\learning_objective.py
from django.db import models
from django.utils.translation import gettext_lazy as _

from users.models import CEFRLevel


class LearningObjective(models.Model):
    """
    –£—á–µ–±–Ω–∞—è —Ü–µ–ª—å ‚Äî –ø–µ–¥–∞–≥–æ–≥–∏—á–µ—Å–∫–∏ —Å—Ñ–æ—Ä–º—É–ª–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ —É–º–µ–Ω–∏–µ, –∫–æ—Ç–æ—Ä–æ–µ –¥–æ–ª–∂–µ–Ω —Ä–∞–∑–≤–∏—Ç—å —Å—Ç—É–¥–µ–Ω—Ç.

    –í–º–µ—Å—Ç–æ —Ä—É—á–Ω–æ–≥–æ –∫–æ–¥–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, "B1-G-01") –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ:
    - CEFR-—É—Ä–æ–≤–µ–Ω—å,
    - –æ–±–ª–∞—Å—Ç—å –Ω–∞–≤—ã–∫–∞ (–≥—Ä–∞–º–º–∞—Ç–∏–∫–∞, –ª–µ–∫—Å–∏–∫–∞ –∏ —Ç.–¥.),
    - –ø–æ—Ä—è–¥–∫–æ–≤—ã–π –Ω–æ–º–µ—Ä –≤ —Ä–∞–º–∫–∞—Ö —É—Ä–æ–≤–Ω—è –∏ –æ–±–ª–∞—Å—Ç–∏.

    –ò–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä (`identifier`) –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏ –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç —É–Ω–∏–∫–∞–ª—å–Ω–æ—Å—Ç—å.

    –ü—Ä–∏–º–µ—Ä—ã:
    - "Use Past Simple and Present Perfect correctly in work contexts" ‚Üí grammar, B1, order=1 ‚Üí identifier="grammar-B1-01"
    - "Understand technical stand-up meetings" ‚Üí listening, B1, order=1 ‚Üí identifier="listening-B1-01"
    """

    # TODO –ø—Ä–æ–º–ø—Ç –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —É—Ä–æ–∫–æ–≤

    """
    You are an expert English curriculum designer for IT professionals.
Your task is to generate a structured LESSON and TASKS that help the student achieve a specific LEARNING OBJECTIVE.

The student:
- Role: backend developer
- Weakness: confuses Past Simple and Present Perfect (e.g., "I have fixed it yesterday")
- Target objective: {
"identifier": "grammar-B1-01",
 "name": "Use Past Simple and Present Perfect correctly in work contexts",
  "cefr_level": "B1",
   "skill_domain": "grammar"
   }

Output JSON with two keys: "lesson" and "tasks".

LESSON FORMAT:
{
  "title": "string",
  "description": "string",
  "lesson_type": "grammar",
  "duration_minutes": int (5-15),
  "required_cefr": "B1",
  "skill_focus": ["grammar"],
  "content": { /* optional narrative for student */ }
}

TASK FORMAT (array of 3‚Äì4 tasks):
Each task must have:
- "task_type": "grammar"
- "response_format": one of ["single_choice", "multiple_choice", "short_text"]
- "difficulty_cefr": "B1"
- "content": structured per platform rules (see examples below)
- "professional_tags": ["backend", "standup-meetings"] (relevant to student)

Content examples:
- MCQ: {"prompt": "...", "options": [...], "correct_idx": 1}
- Short text: {"prompt": "...", "correct": ["expected answer"], "case_sensitive": false}

DO NOT include file uploads or audio. Keep tasks text-based.

Output ONLY valid JSON. No explanations.
    """
    # TODO system_prompt
    """
    You are an expert AI tutor and curriculum designer for IT professionals learning English.
You generate structured lessons and tasks that align with specific learning objectives.
You NEVER invent fake audio, video, or file content. Instead, you specify media requirements clearly so the system can provide real media.

All output must be valid JSON and follow the exact schema described below.
    """
    # TODO user_prompt
    """
    Generate a lesson and tasks for the following student and learning objective(s).

STUDENT CONTEXT:
- Professional role: {{ student_profession }}
- CEFR level: {{ student_cefr }}
- Learning goals: {{ student_goals }}
- Weaknesses: {{ student_weaknesses }} (e.g., ["confuses past tenses", "struggles with listening to native speakers"])
- Strengths: {{ student_strengths }} (e.g., ["strong vocabulary", "good reading comprehension"])

LEARNING OBJECTIVE(S) TO TARGET:
[ 
  {
    "identifier": "string",       // e.g., "grammar-B1-01"
    "name": "string",             // e.g., "Use Past Simple and Present Perfect correctly in work contexts"
    "skill_domain": "string",     // one of: grammar, vocabulary, reading, listening, writing, speaking
    "cefr_level": "string"        // e.g., "B1"
  },
  ... (1‚Äì3 objectives max)
]

INSTRUCTIONS:
1. Generate ONE lesson and 2‚Äì4 tasks.
2. Choose lesson_type = skill_domain of the PRIMARY objective.
3. For each task:
   - Set task_type = skill_domain
   - Choose response_format appropriately:
        ‚Ä¢ grammar/vocabulary/reading ‚Üí "single_choice", "multiple_choice", or "short_text"
        ‚Ä¢ writing ‚Üí "free_text"
        ‚Ä¢ speaking ‚Üí "audio"
        ‚Ä¢ listening ‚Üí "short_text" or "multiple_choice" (audio will be provided separately)
   - If the task requires media (e.g., listening needs audio), set:
        "media_required": true,
        "media_type": "audio|text|image",
        "media_description": "Clear description for content team (e.g., '30s stand-up audio about deployment')"
   - Do NOT include actual file paths or fake URLs.
4. Use professional context in prompts: mention stand-ups, tickets, PRs, incidents, etc.
5. Keep language supportive, clear, and professional.

OUTPUT FORMAT (strict JSON):
{
  "lesson": {
    "title": "string",
    "description": "string",
    "lesson_type": "string",           // skill_domain
    "duration_minutes": integer (5‚Äì20),
    "required_cefr": "string",
    "skill_focus": ["string"],         // e.g., ["grammar", "writing"]
    "content": { "intro": "string" }   // optional
  },
  "tasks": [
    {
      "task_type": "string",
      "response_format": "string",
      "difficulty_cefr": "string",
      "professional_tags": ["string"],  // e.g., ["backend", "standup-meetings"]
      "content": { ... },               // structured per task type (see examples below)
      "media_required": boolean,        // optional
      "media_type": "string",           // only if media_required=true
      "media_description": "string"     // only if media_required=true
    }
  ]
}

CONTENT SCHEMAS BY RESPONSE FORMAT:
- single_choice / multiple_choice:
    { "prompt": "string", "options": ["a", "b", "c"], "correct_idx": 1 }
- short_text:
    { "prompt": "string", "correct": ["answer1", "answer2"], "case_sensitive": false }
- free_text:
    { "prompt": "string", "max_length_words": 50, "expected_elements": ["past_tense", "IT_vocab"] }
- audio:
    { "prompt": "string", "max_duration_sec": 30 }

OUTPUT ONLY VALID JSON. NO MARKDOWN. NO EXPLANATIONS.
    """
    """
    üìå –ö–∞–∫ —Å–∏—Å—Ç–µ–º–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —ç—Ç–æ—Ç –ø—Ä–æ–º–ø—Ç
–°–æ–±–∏—Ä–∞–µ—Ç –∫–æ–Ω—Ç–µ–∫—Å—Ç —Å—Ç—É–¥–µ–Ω—Ç–∞ –∏–∑ Student, SkillProfile, ErrorLog.
–í—ã–±–∏—Ä–∞–µ—Ç 1‚Äì3 LearningObjective (–Ω–∞–ø—Ä–∏–º–µ—Ä, –∏–∑ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π –∞–¥–∞–ø—Ç–∏–≤–Ω–æ–≥–æ —Å–µ—Ä–≤–∏—Å–∞).
–ü–æ–¥—Å—Ç–∞–≤–ª—è–µ—Ç –¥–∞–Ω–Ω—ã–µ –≤ —à–∞–±–ª–æ–Ω –ø—Ä–æ–º–ø—Ç–∞ (—á–µ—Ä–µ–∑ Jinja –∏–ª–∏ f-strings).
–û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –≤ LLM ‚Üí –ø–æ–ª—É—á–∞–µ—Ç JSON.
–û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –æ—Ç–≤–µ—Ç:
–°–æ–∑–¥–∞—ë—Ç Lesson.
–î–ª—è –∫–∞–∂–¥–æ–≥–æ Task:
—Å–æ—Ö—Ä–∞–Ω—è–µ—Ç content,
–µ—Å–ª–∏ media_required == true ‚Äî —Å–æ–∑–¥–∞—ë—Ç –∑–∞–¥–∞—á—É –¥–ª—è –∫–æ–Ω—Ç–µ–Ω—Ç-–∫–æ–º–∞–Ω–¥—ã –∏–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π TaskMedia (–µ—Å–ª–∏ —Ä–µ—á—å –æ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–µ),
–ø—Ä–∏–≤—è–∑—ã–≤–∞–µ—Ç ProfessionalTag –ø–æ —Å–æ–≤–ø–∞–¥–µ–Ω–∏—é (–Ω–∞–ø—Ä–∏–º–µ—Ä, "backend" ‚Üí –∏—â–µ—Ç —Ç–µ–≥ –≤ –ë–î).
–ü—Ä–∏–≤—è–∑—ã–≤–∞–µ—Ç –≤—Å–µ –∑–∞–¥–∞–Ω–∏—è –∫ Lesson, –∞ Lesson ‚Äî –∫ —Ü–µ–ª—è–º (learning_objectives).

üåü –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ —Ç–∞–∫–æ–≥–æ –ø–æ–¥—Ö–æ–¥–∞
–í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å - –ö–∞–∫ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞
–ü–æ–¥–¥–µ—Ä–∂–∫–∞ –≤—Å–µ—Ö 6 –Ω–∞–≤—ã–∫–æ–≤ - –ß–µ—Ä–µ–∑ skill_domain –∏ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π response_format
–ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω–∞—è —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ—Å—Ç—å - professional_tags + –∫–æ–Ω—Ç–µ–∫—Å—Ç –≤ –ø—Ä–æ–º–ø—Ç–µ
–ë–µ–∑–æ–ø–∞—Å–Ω–∞—è —Ä–∞–±–æ—Ç–∞ —Å –º–µ–¥–∏–∞ - LLM –æ–ø–∏—Å—ã–≤–∞–µ—Ç, —á—Ç–æ –Ω—É–∂–Ω–æ, –Ω–æ –Ω–µ –≤—ã–¥—É–º—ã–≤–∞–µ—Ç —Ñ–∞–π–ª—ã
–¢–æ—á–Ω–∞—è –ø—Ä–∏–≤—è–∑–∫–∞ –∫ —Ü–µ–ª—è–º - –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è identifier –∏–∑ LearningObjective
–ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –∫ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–µ –∏ –æ–±—É—á–µ–Ω–∏—é - –û–¥–∏–Ω –ø—Ä–æ–º–ø—Ç —Ä–∞–±–æ—Ç–∞–µ—Ç –∏ –¥–ª—è Warm-up, –∏ –¥–ª—è –≥–ª—É–±–æ–∫–æ–≥–æ —É—Ä–æ–∫–∞

    """
    # === –°—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ø–æ–ª—è ===
    cefr_level = models.CharField(
        max_length=2,
        choices=CEFRLevel,
        verbose_name=_("CEFR Level"),
        help_text=_("–£—Ä–æ–≤–µ–Ω—å CEFR, –Ω–∞ –∫–æ—Ç–æ—Ä–æ–º —ç—Ç–∞ —Ü–µ–ª—å –∞–∫—Ç—É–∞–ª—å–Ω–∞")
    )
    skill_domain = models.CharField(
        max_length=20,
        choices=[
            ('grammar', _('Grammar')),
            ('vocabulary', _('Vocabulary')),
            ('listening', _('Listening')),
            ('reading', _('Reading')),
            ('writing', _('Writing')),
            ('speaking', _('Speaking')),
        ],
        verbose_name=_("Skill Domain"),
        help_text=_("–û–±–ª–∞—Å—Ç—å —è–∑—ã–∫–æ–≤–æ–≥–æ –Ω–∞–≤—ã–∫–∞")
    )
    order_in_level = models.PositiveSmallIntegerField(
        default=1,
        verbose_name=_("Order within level and domain"),
        help_text=_("–ü–æ—Ä—è–¥–∫–æ–≤—ã–π –Ω–æ–º–µ—Ä —Ü–µ–ª–∏ –≤ —Ä–∞–º–∫–∞—Ö —É—Ä–æ–≤–Ω—è –∏ –æ–±–ª–∞—Å—Ç–∏ (–¥–ª—è —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏)")
    )

    # === –ß–µ–ª–æ–≤–µ–∫–æ—á–∏—Ç–∞–µ–º—ã–µ –ø–æ–ª—è ===
    name = models.CharField(
        max_length=200,
        verbose_name=_("Name"),
        help_text=_("Clear, actionable objective ‚Äî e.g., 'Use Past Simple correctly in work emails'")
    )
    description = models.TextField(
        blank=True,
        verbose_name=_("Description"),
        help_text=_("Optional detailed explanation for methodologists")
    )

    # === –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ–º—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä (–¥–ª—è API, –ª–æ–≥–∏–∫–∏, LLM) ===
    identifier = models.SlugField(
        max_length=50,
        unique=True,
        editable=False,
        verbose_name=_("Machine Identifier"),
        help_text=_("Auto-generated unique ID like 'grammar-B1-01'")
    )

    # === –°–ª—É–∂–µ–±–Ω—ã–µ –ø–æ–ª—è ===
    is_active = models.BooleanField(default=True, verbose_name=_("Is Active"))
    created_at = models.DateTimeField(auto_now_add=True)

    class Meta:
        verbose_name = _("Learning Objective")
        verbose_name_plural = _("Learning Objectives")
        unique_together = [
            ['cefr_level', 'skill_domain', 'order_in_level']
        ]
        ordering = ['cefr_level', 'skill_domain', 'order_in_level']
        indexes = [
            models.Index(fields=['cefr_level', 'skill_domain']),
            models.Index(fields=['identifier']),
        ]

    def save(self, *args, **kwargs):
        # –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –≤–∏–¥–∞: grammar-B1-01
        self.identifier = f"{self.skill_domain}-{self.cefr_level}-{self.order_in_level:02d}"
        super().save(*args, **kwargs)

    def __str__(self):
        return f"[{self.identifier}] {self.name}"

#######

D:\ML\Projects\Practice\engageAI_v2\engageai_core\curriculum\models\systematization\professional_tag.py
from django.db import models
from django.utils.translation import gettext_lazy as _


class ProfessionalTag(models.Model):
    """
    –ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–π —Ç–µ–≥ ‚Äî –æ–±–æ–∑–Ω–∞—á–∞–µ—Ç —Å—Ñ–µ—Ä—É –∏–ª–∏ —Ç–∏–ø –∑–∞–¥–∞—á, —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã—Ö –∑–∞–¥–∞–Ω–∏—é.
    –ü—Ä–∏–º–µ—Ä—ã: "backend", "qa", "incident-response", "technical-writing".

    –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:
    - –ü–æ–∑–≤–æ–ª—è–µ—Ç –ø–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫—É –∏ –æ–±—É—á–µ–Ω–∏–µ –ø–æ–¥ —Ä–æ–ª—å —Å—Ç—É–¥–µ–Ω—Ç–∞ (–∏–∑ –º–∏–Ω–∏-–∞–Ω–∫–µ—Ç—ã).
    - –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ –∑–∞–¥–∞–Ω–∏–π –ø–æ —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ—Å—Ç–∏.

    –ü—Ä–∏–º–µ—Ä—ã –Ω–∞–ø–æ–ª–Ω–µ–Ω–∏—è:
    - "backend"
    - "qa"
    - "devops"
    - "product-interviews"
    - "api-documentation"
    - "standup-meetings"
    - "ticket-writing"

    –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:
    - –¢–µ–≥–∏ —Å–æ–∑–¥–∞—é—Ç—Å—è –∫—É—Ä–∞—Ç–æ—Ä–∞–º–∏/–º–µ—Ç–æ–¥–∏—Å—Ç–∞–º–∏.
    - –°—Ç—É–¥–µ–Ω—Ç –≤—ã–±–∏—Ä–∞–µ—Ç 1‚Äì3 —Ç–µ–≥–∞ –ø—Ä–∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –∏–ª–∏ –≤ –º–∏–Ω–∏-–∞–Ω–∫–µ—Ç–µ.
    """
    name = models.CharField(
        max_length=50,
        unique=True,
        verbose_name=_("Tag Name"),
        help_text=_("Short, machine-readable name (e.g., 'backend', 'standup-meetings')")
    )
    description = models.CharField(
        max_length=200,
        blank=True,
        verbose_name=_("Description"),
        help_text=_("Human-readable explanation for admins")
    )
    is_active = models.BooleanField(default=True, verbose_name=_("Is Active"))

    class Meta:
        verbose_name = _("Professional Tag")
        verbose_name_plural = _("Professional Tags")
        indexes = [models.Index(fields=['name'])]

    def __str__(self):
        return self.name


#######


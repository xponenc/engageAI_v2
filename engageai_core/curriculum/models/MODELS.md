# curriculum.models
Этот документ описывает модели модуля `curriculum`
---
## 1. Общие принципы
### 1.1 Domain-driven, но pragmatic
Модели отражают **обучающий домен**, а не идеализированную DDD-схему.

Некоторые концепты (например, Skill) реализованы **не как отдельные сущности**, а как enum + числовые значения.
Это оптимизирует производительность и соответствует бизнес-логике платформы.

### 1.2 Audit-first
Ключевые модели (Assessment, LessonTransition, SkillSnapshot) проектируются так, чтобы:
- фиксировать факт
- не изменяться задним числом
- позволять объяснение и воспроизведение flow

Аудит-ориентированная архитектура обеспечивает воспроизводимость учебного процесса и объяснимость решений системы.

---
## 2. Core learning models
### Course
**Назначение:** контейнер учебной программы.
**Ключевые поля (conceptually):**
- title
- description
- ordering
**Используется:**
- CurriculumQuery

Курс представляет собой целостную учебную программу с фиксированной тематикой и последовательностью уроков, что позволяет системе эффективно управлять прогрессом обучения.

### Lesson
**Назначение:** основная единица прогрессии.
**Связи:**
- Course → Lesson (1:N)
- Lesson → Task (1:N)
- Lesson → LearningObjective (M:N)
**Важно:**
- Lesson не знает, будет ли он пройден успешно
- переходы фиксируются в LessonTransition

Урок инкапсулирует логически завершенный фрагмент учебного материала, ориентированный на конкретные профессиональные сценарии и языковые навыки.

### Task
**Назначение:** конкретное задание внутри урока.
**Связи:**
- Task → Lesson (N:1)
- Task → ProfessionalTag (M:N)
**Важно:**
- Task — основной источник skill-сигналов
- содержит структурированный контент в соответствии со схемой

Задание представляет минимальную единицу взаимодействия студента с системой и служит основой для сбора данных о прогрессе обучения.

### Enrollment
**Назначение:** связь студента с курсом.
**Инварианты:**
- один Enrollment = один учебный контекст
- все progress-сущности привязаны к Enrollment
- только одно активное зачисление на курс

Зачисление создает изолированный контекст обучения для студента, позволяющий отслеживать индивидуальный прогресс и адаптировать контент.

### StudentTaskResponse
**Назначение:** ответ студента на Task.
**Используется:**
- AssessmentService

Ответ студента сохраняется как неизменяемый факт, что обеспечивает полную воспроизводимость учебного процесса и точность аналитики.

### Assessment
**Назначение:** результат оценки StudentResponse.
**Характеристики:**
- неизменяем после создания
- хранит структурированный feedback
**Используется:**
- DecisionService
- LessonExplainer
- SkillStateUpdater

Оценка задания представляет собой структурированный результат анализа ответа студента, используемый для принятия адаптивных решений и построения обратной связи.

---
## 3. Skills
### SkillSnapshot
**Назначение:** снимок навыков студента в момент принятия решения.
**Свойства:**
- создаётся часто
- не изменяется
**Используется:**
- LessonTransition
- Explainability

Снимок навыков фиксирует текущее состояние студента на определенный момент времени, что позволяет анализировать динамику прогресса и объяснять решения системы.

### SkillTrajectory
**Назначение:** агрегированная история изменения одного навыка.
**Свойства:**
- обновляется инкрементально
- хранит тренды и стабильность
**Используется:**
- DecisionService
- ExplainabilityEngine

Траектория навыка инкапсулирует исторические данные и вычисляет метрики прогресса (тренды, стабильность), что позволяет системе принимать обоснованные адаптивные решения.

---
## 4. Progress & audit
### LessonTransition
**Назначение:** неизменяемый факт перехода в обучении.
**Это ключевая модель для:**
- объяснимости
- дебага
- воспроизведения обучения
**Создаётся:**
- TransitionRecorder
**Инварианты:**
- объект НЕ редактируется после создания
- assessment всегда есть
- decision_code обязателен

Переход между уроками фиксируется как неизменяемое событие, что обеспечивает аудит и возможность воспроизведения обучения при необходимости.

### TeacherOverride
**Назначение:** ручное вмешательство преподавателя в решение системы
**Характеристики:**
- фиксирует переопределение решений
- сохраняет причину вмешательства

Переопределение преподавателем позволяет сохранять педагогический контроль над процессом обучения и одновременно улучшать алгоритмы адаптации через анализ человеческих решений.

### ErrorLog
**Назначение:** журнал типичных ошибок студента
**Характеристики:**
- хранит примеры и коррекции ошибок
- используется для формирования практики
- позволяет выявлять закономерности

Журнал ошибок фиксирует конкретные проблемы в языковых навыках студента, что дает возможность персонализировать дальнейшее обучение и целенаправленно устранять слабые места.

---
## 5. TODO / точки развития
- Формализовать mapping Task → Skill
- Добавить uncertainty / confidence в SkillSnapshot
- Versioning LessonTransition
- Replay учебного процесса
- Поддержка branching curriculum
- Интеграция с LLM для генерации индивидуальных заданий
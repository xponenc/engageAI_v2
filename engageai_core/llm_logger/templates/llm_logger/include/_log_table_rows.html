<!-- templates/llm_logger/_log_table_rows.html -->
{% for log in logs %}
<tr>
    <td>
        <a href="{% url 'llm_logger:log_detail' log.id %}" class="link">
            <p class="link__wrapper">
                <span class="text text_fat">{{ log.get_request_type_display }}</span>
                <span>{{ log.request_time|date:"Y-m-d H:i:s" }}</span>
                {% if log.user %}
                    <span>{{ log.user.get_full_name|default:log.user.username }}</span>
                {% else %}
                    <span class="text-muted">-</span>
                {% endif %}
            </p>
            <i class="link__icon fas fa-eye"></i>
        </a>
    </td>
    <td><code>{{ log.model_name }}</code><strong>${{ log.cost_total|floatformat:6 }}</strong>{{ log.duration_sec|floatformat:2 }} сек</td>
    <td>
        {% if log.course %}
            <p>Курс: <span class="text text_fat">{{ log.course.title }} id:{{ log.course.id }}</span></p>
        {% endif %}
        {% if log.lesson %}
            <p>Урок: <span class="text text_fat">{{ log.lesson.title }} id:{{ log.lesson.id }}</span></p>
        {% endif %}
        {% if log.task %}
            <p>Задание: <span class="text text_fat">№ {{ log.task.order }}</span></p>
        {% endif %}
        {% if not log.course and log.lesson and not log.task %}
            <span class="text_muted">-</span>
        {% endif %}
    </td>
    <td>
        {% if log.status == 'SUCCESS' %}
            <span class="badge bg-success">Успех</span>
        {% elif log.status == 'ERROR' %}
            <span class="badge bg-danger">Ошибка</span>
        {% else %}
            <span class="badge bg-warning">Таймаут</span>
        {% endif %}
    </td>
</tr>
{% empty %}
<tr>
    <td colspan="4" class="text-center text-muted py-5">
        <i class="fas fa-inbox fa-3x mb-3 d-block"></i>
        <p>Нет логов по заданным фильтрам</p>
    </td>
</tr>
{% endfor %}
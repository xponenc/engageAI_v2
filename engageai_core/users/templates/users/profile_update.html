{% extends 'base.html' %}
{% load static %}

{% block title %}{{ user.profile|yesno:"–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ,–°–æ–∑–¥–∞–Ω–∏–µ" }} –ø—Ä–æ—Ñ–∏–ª—è {{ object.name }}{% endblock title %}

{% block css %}
<link href="{% static 'css/users/user.css' %}" rel="stylesheet">
{% endblock css %}

{% block content %}
<section class="profile-edit">
    <div class="profile-edit__container container">
        
        <!-- –•–ª–µ–±–Ω—ã–µ –∫—Ä–æ—à–∫–∏ -->
        <nav class="breadcrumbs">
            <a href="{% url 'users:profile' user.id %}" class="breadcrumbs__link">–õ–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç</a>
            <span class="breadcrumbs__separator">/</span>
            <span class="breadcrumbs__current">{{ user.profile|yesno:"–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ,–°–æ–∑–¥–∞–Ω–∏–µ" }} –ø—Ä–æ—Ñ–∏–ª—è {{ object.name }}</span>
        </nav>

        <div class="profile-edit__header">
            <h1 class="profile-edit__title">{{ user.profile|yesno:"–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ,–°–æ–∑–¥–∞–Ω–∏–µ" }} –ø—Ä–æ—Ñ–∏–ª—è {{ object.name }}</h1>
            <p class="profile-edit__subtitle">–û–±–Ω–æ–≤–∏—Ç–µ –≤–∞—à—É –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é</p>
        </div>

        <form class="profile-edit__form form" method="post" enctype="multipart/form-data" id="profile-form">
            {% csrf_token %}
            
            <div class="profile-edit__content">
                <!-- –õ–µ–≤–∞—è –∫–æ–ª–æ–Ω–∫–∞ - –û—Å–Ω–æ–≤–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è -->
                <div class="profile-edit__main">
                    
                    <!-- –ê–≤–∞—Ç–∞—Ä -->
                    <div class="form-section card">
                        <h3 class="form-section__title">–ê–≤–∞—Ç–∞—Ä –ø—Ä–æ—Ñ–∏–ª—è</h3>
                        <div class="avatar-upload">
                            <div class="avatar-upload__preview">
                                {% comment %} <pre>
instance: {{ form.instance }}
avatar: {{ form.instance.avatar }}
avatar.url: {% if form.instance.avatar %}{{ form.instance.avatar.url }}{% else %}NONE{% endif %}
</pre> {% endcomment %}
                                {% if form.instance.avatar %}
                                    <img id="avatar-preview" src="{{ form.instance.avatar.url }}" alt="–¢–µ–∫—É—â–∏–π –∞–≤–∞—Ç–∞—Ä" class="avatar-upload__image">
                                {% else %}
                                    <div id="avatar-preview" class="avatar-upload__placeholder">
                                        {{ user.first_name|first|default:user.username|first|upper }}
                                    </div>
                                {% endif %}
                            </div>
                            <div class="avatar-upload__controls">
                                <label for="{{ form.avatar.id_for_label }}" class="btn btn_outline btn_sm">
                                    –í—ã–±—Ä–∞—Ç—å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ
                                </label>
                                {{ form.avatar }}
                                <button type="button" class="btn btn_ghost btn_sm" id="remove-avatar">
                                    –£–¥–∞–ª–∏—Ç—å
                                </button>
                                <div class="avatar-upload__hint">
                                    –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–π —Ä–∞–∑–º–µ—Ä: 200√ó200 px. JPG, PNG –∏–ª–∏ GIF.
                                </div>
                            </div>
                        </div>
                        {% if form.avatar.errors %}
                            <div class="form-field__errors">
                                {{ form.avatar.errors }}
                            </div>
                        {% endif %}
                    </div>

                    <!-- –û—Å–Ω–æ–≤–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è -->
                    <div class="form-section card">
                        <h3 class="form-section__title">–û—Å–Ω–æ–≤–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è</h3>
                        
                        <div class="form-grid">
                            <div class="form-field">
                                <label for="{{ form.first_name.id_for_label }}" class="form-field__label">
                                    –ò–º—è
                                </label>
                                {{ form.first_name }}
                                {% if form.first_name.errors %}
                                    <div class="form-field__errors">
                                        {{ form.first_name.errors }}
                                    </div>
                                {% endif %}
                            </div>

                            <div class="form-field">
                                <label for="{{ form.last_name.id_for_label }}" class="form-field__label">
                                    –§–∞–º–∏–ª–∏—è
                                </label>
                                {{ form.last_name }}
                                {% if form.last_name.errors %}
                                    <div class="form-field__errors">
                                        {{ form.last_name.errors }}
                                    </div>
                                {% endif %}
                            </div>
                        </div>

                        <div class="form-field">
                            <label for="{{ form.email.id_for_label }}" class="form-field__label">
                                –≠–ª–µ–∫—Ç—Ä–æ–Ω–Ω–∞—è –ø–æ—á—Ç–∞
                            </label>
                            {{ form.email }}
                            {% if form.email.errors %}
                                <div class="form-field__errors">
                                    {{ form.email.errors }}
                                </div>
                            {% endif %}
                        </div>
                    </div>

                    <!-- –ö–æ–Ω—Ç–∞–∫—Ç–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è -->
                    <div class="form-section card">
                        <h3 class="form-section__title">–ö–æ–Ω—Ç–∞–∫—Ç–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è</h3>
                        
                        <div class="form-field">
                            <label for="{{ form.phone.id_for_label }}" class="form-field__label">
                                –¢–µ–ª–µ—Ñ–æ–Ω
                                <span class="form-field__hint">–§–æ—Ä–º–∞—Ç: 79991234567 (7 + 10 —Ü–∏—Ñ—Ä)</span>
                            </label>
                            {{ form.phone }}
                            <div class="form-field__hint" id="phone-hint">
                                –í–≤–µ–¥–∏—Ç–µ –Ω–æ–º–µ—Ä –≤ —Ñ–æ—Ä–º–∞—Ç–µ 7XXXXXXXXXX
                            </div>
                            {% if form.phone.errors %}
                                <div class="form-field__errors">
                                    {{ form.phone.errors }}
                                </div>
                            {% endif %}
                        </div>

                        <div class="form-field">
                            <label for="{{ form.location.id_for_label }}" class="form-field__label">
                                –ì–æ—Ä–æ–¥ –ø—Ä–æ–∂–∏–≤–∞–Ω–∏—è
                            </label>
                            {{ form.location }}
                            {% if form.location.errors %}
                                <div class="form-field__errors">
                                    {{ form.location.errors }}
                                </div>
                            {% endif %}
                        </div>
                    </div>
                </div>

                <!-- –ü—Ä–∞–≤–∞—è –∫–æ–ª–æ–Ω–∫–∞ - –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è -->
                <div class="profile-edit__sidebar">
                    
                    <!-- –î–∞—Ç–∞ —Ä–æ–∂–¥–µ–Ω–∏—è -->
                    <div class="form-section card">
                        <h3 class="form-section__title">–õ–∏—á–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ</h3>
                        
                        <div class="form-field">
                            <label for="{{ form.birthdate.id_for_label }}" class="form-field__label">
                                –î–∞—Ç–∞ —Ä–æ–∂–¥–µ–Ω–∏—è
                                <span class="form-field__hint">–§–æ—Ä–º–∞—Ç: –¥–¥.–º–º.–≥–≥–≥–≥</span>
                            </label>
                            {{ form.birthdate }}
                            <div class="form-field__hint" id="birthdate-hint">
                                –í–≤–µ–¥–∏—Ç–µ –¥–∞—Ç—É –≤ —Ñ–æ—Ä–º–∞—Ç–µ –î–î.–ú–ú.–ì–ì–ì–ì
                            </div>
                            {% if form.birthdate.errors %}
                                <div class="form-field__errors">
                                    {{ form.birthdate.errors }}
                                </div>
                            {% endif %}
                        </div>
                    </div>

                    <!-- –û —Å–µ–±–µ -->
                    <div class="form-section card">
                        <h3 class="form-section__title">–û —Å–µ–±–µ</h3>
                        
                        <div class="form-field">
                            <label for="{{ form.bio.id_for_label }}" class="form-field__label">
                                –ë–∏–æ–≥—Ä–∞—Ñ–∏—è
                                <span class="form-field__counter">
                                    <span id="bio-counter">0</span>/1000
                                </span>
                            </label>
                            {{ form.bio }}
                            {% if form.bio.errors %}
                                <div class="form-field__errors">
                                    {{ form.bio.errors }}
                                </div>
                            {% endif %}
                        </div>
                    </div>

                    <!-- –°—Ç–∞—Ç—É—Å –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏–∏ -->
                    <div class="form-section card">
                        <h3 class="form-section__title">–°—Ç–∞—Ç—É—Å –∞–∫–∫–∞—É–Ω—Ç–∞</h3>
                        
                        <div class="verification-status">
                            <div class="verification-status__icon">
                                {% if user.profile.is_verified %}
                                    ‚úÖ
                                {% else %}
                                    ‚è≥
                                {% endif %}
                            </div>
                            <div class="verification-status__content">
                                <h4 class="verification-status__title">
                                    {% if user.profile.is_verified %}
                                        –ê–∫–∫–∞—É–Ω—Ç –≤–µ—Ä–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω
                                    {% else %}
                                        –û–∂–∏–¥–∞–µ—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏
                                    {% endif %}
                                </h4>
                                <p class="verification-status__description">
                                    {% if user.profile.is_verified %}
                                        –í–∞—à –∞–∫–∫–∞—É–Ω—Ç –ø—Ä–æ—à–µ–ª –ø—Ä–æ–≤–µ—Ä–∫—É –º–æ–¥–µ—Ä–∞—Ç–æ—Ä–æ–º
                                    {% else %}
                                        –ü–æ—Å–ª–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –≤–∞–º —Å—Ç–∞–Ω—É—Ç –¥–æ—Å—Ç—É–ø–Ω—ã –≤—Å–µ —Ñ—É–Ω–∫—Ü–∏–∏
                                    {% endif %}
                                </p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- –ö–Ω–æ–ø–∫–∏ –¥–µ–π—Å—Ç–≤–∏–π -->
            <div class="profile-edit__actions">
                <div class="action-buttons">
                    <button type="submit" class="btn btn_primary btn_lg" id="submit-btn">
                        <span class="btn__icon">üíæ</span>
                        –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è
                    </button>
                    <a href="{% url 'users:profile' user.id %}" class="btn btn_outline btn_lg">
                        –û—Ç–º–µ–Ω–∏—Ç—å
                    </a>
                </div>
            </div>
        </form>
    </div>
</section>
{% endblock content %}

{% block script %}
<script>
document.addEventListener('DOMContentLoaded', function() {
    // –ü—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä –∞–≤–∞—Ç–∞—Ä–∞
    const avatarInput = document.querySelector('#id_avatar');
    const avatarPreview = document.querySelector('#avatar-preview');
    const removeAvatarBtn = document.querySelector('#remove-avatar');
    
    if (avatarInput) {
        avatarInput.addEventListener('change', function(e) {
            const file = e.target.files[0];
            if (file) {
                const reader = new FileReader();
                reader.onload = function(e) {
                    if (avatarPreview.tagName === 'IMG') {
                        avatarPreview.src = e.target.result;
                    } else {
                        // –ó–∞–º–µ–Ω—è–µ–º placeholder –Ω–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ
                        const newImg = document.createElement('img');
                        newImg.id = 'avatar-preview';
                        newImg.src = e.target.result;
                        newImg.className = 'avatar-upload__image';
                        avatarPreview.parentNode.replaceChild(newImg, avatarPreview);
                    }
                };
                reader.readAsDataURL(file);
            }
        });
    }
    
    // –£–¥–∞–ª–µ–Ω–∏–µ –∞–≤–∞—Ç–∞—Ä–∞
    if (removeAvatarBtn) {
        removeAvatarBtn.addEventListener('click', function() {
            if (avatarInput) {
                avatarInput.value = '';
            }
            // –í–æ–∑–≤—Ä–∞—â–∞–µ–º placeholder
            if (avatarPreview.tagName === 'IMG') {
                const placeholder = document.createElement('div');
                placeholder.id = 'avatar-preview';
                placeholder.className = 'avatar-upload__placeholder';
                placeholder.textContent = '{{ user.first_name|first|default:user.username|first|upper }}';
                avatarPreview.parentNode.replaceChild(placeholder, avatarPreview);
            }
        });
    }
    
    // –°—á–µ—Ç—á–∏–∫ —Å–∏–º–≤–æ–ª–æ–≤ –¥–ª—è –±–∏–æ–≥—Ä–∞—Ñ–∏–∏
    const bioTextarea = document.getElementById('{{ form.bio.id_for_label }}');
    const bioCounter = document.getElementById('bio-counter');
    
    if (bioTextarea && bioCounter) {
        bioTextarea.addEventListener('input', function() {
            bioCounter.textContent = this.value.length;
        });
        
        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Å—á–µ—Ç—á–∏–∫–∞
        bioCounter.textContent = bioTextarea.value.length;
    }
    
    // –í–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞—Ç—ã —Ä–æ–∂–¥–µ–Ω–∏—è
    const birthdateInput = document.getElementById('{{ form.birthdate.id_for_label }}');
    const birthdateHint = document.getElementById('birthdate-hint');
    
    if (birthdateInput) {
        // –î–æ–±–∞–≤–ª—è–µ–º –º–∞—Å–∫—É –¥–ª—è –¥–∞—Ç—ã
        birthdateInput.addEventListener('input', function(e) {
            let value = e.target.value.replace(/\D/g, '');
            
            if (value.length > 2) {
                value = value.substring(0, 2) + '.' + value.substring(2);
            }
            if (value.length > 5) {
                value = value.substring(0, 5) + '.' + value.substring(5, 9);
            }
            
            e.target.value = value;
        });
        
        birthdateInput.addEventListener('blur', function() {
            validateBirthdate();
        });
        
        birthdateInput.addEventListener('input', function() {
            clearValidationStyle(this);
            if (birthdateHint) {
                birthdateHint.style.color = 'var(--color-text-muted)';
            }
        });
    }
    
    // –í–∞–ª–∏–¥–∞—Ü–∏—è —Ç–µ–ª–µ—Ñ–æ–Ω–∞
    const phoneInput = document.getElementById('{{ form.phone.id_for_label }}');
    const phoneHint = document.getElementById('phone-hint');
    
    if (phoneInput) {
        // –î–æ–±–∞–≤–ª—è–µ–º –º–∞—Å–∫—É –¥–ª—è —Ç–µ–ª–µ—Ñ–æ–Ω–∞
        phoneInput.addEventListener('input', function(e) {
            let value = e.target.value.replace(/\D/g, '');
            
            // –û–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ–º –¥–ª–∏–Ω—É 11 —Ü–∏—Ñ—Ä–∞–º–∏
            if (value.length > 11) {
                value = value.substring(0, 11);
            }
            
            // –ï—Å–ª–∏ –Ω–æ–º–µ—Ä –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è –Ω–µ —Å 7, –¥–æ–±–∞–≤–ª—è–µ–º 7
            if (value.length > 0 && value[0] !== '7') {
                value = '7' + value;
            }
            
            e.target.value = value;
        });
        
        phoneInput.addEventListener('blur', function() {
            validatePhone();
        });
        
        phoneInput.addEventListener('input', function() {
            clearValidationStyle(this);
            if (phoneHint) {
                phoneHint.style.color = 'var(--color-text-muted)';
            }
        });
    }
    
    // –í–∞–ª–∏–¥–∞—Ü–∏—è —Ñ–æ—Ä–º—ã –ø—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ
    const profileForm = document.getElementById('profile-form');
    const submitBtn = document.getElementById('submit-btn');
    
    if (profileForm) {
        profileForm.addEventListener('submit', function(e) {
            let isValid = true;
            
            // –ü—Ä–æ–≤–µ—Ä—è–µ–º —Ç–µ–ª–µ—Ñ–æ–Ω
            if (phoneInput && !validatePhone()) {
                isValid = false;
            }
            
            // –ü—Ä–æ–≤–µ—Ä—è–µ–º –¥–∞—Ç—É —Ä–æ–∂–¥–µ–Ω–∏—è
            if (birthdateInput && !validateBirthdate()) {
                isValid = false;
            }
            
            if (!isValid) {
                e.preventDefault();
                showFormError('–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –∏—Å–ø—Ä–∞–≤—å—Ç–µ –æ—à–∏–±–∫–∏ –≤ —Ñ–æ—Ä–º–µ');
            } else {
                // –ë–ª–æ–∫–∏—Ä—É–µ–º –∫–Ω–æ–ø–∫—É –ø—Ä–∏ –≤–∞–ª–∏–¥–Ω–æ–π —Ñ–æ—Ä–º–µ
                if (submitBtn) {
                    submitBtn.disabled = true;
                    submitBtn.innerHTML = '<span class="btn__icon">‚è≥</span>–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ...';
                }
            }
        });
    }
    
    // –§—É–Ω–∫—Ü–∏–∏ –≤–∞–ª–∏–¥–∞—Ü–∏–∏
    function validatePhone() {
        if (!phoneInput) return true;
        
        const value = phoneInput.value.trim();
        const phoneRegex = /^7\d{10}$/;
        
        if (value && !phoneRegex.test(value)) {
            phoneInput.classList.add('input-error');
            if (phoneHint) {
                phoneHint.style.color = 'var(--color-error)';
                phoneHint.textContent = '–ù–µ–≤–µ—Ä–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç —Ç–µ–ª–µ—Ñ–æ–Ω–∞. –î–æ–ª–∂–Ω–æ –±—ã—Ç—å 11 —Ü–∏—Ñ—Ä, –Ω–∞—á–∏–Ω–∞—é—â–∏—Ö—Å—è —Å 7';
            }
            return false;
        }
        
        phoneInput.classList.remove('input-error');
        if (phoneHint) {
            phoneHint.style.color = 'var(--color-success)';
            phoneHint.textContent = '‚úì –§–æ—Ä–º–∞—Ç —Ç–µ–ª–µ—Ñ–æ–Ω–∞ –∫–æ—Ä—Ä–µ–∫—Ç–µ–Ω';
        }
        return true;
    }
    
    function validateBirthdate() {
        if (!birthdateInput) return true;
        
        const value = birthdateInput.value.trim();
        const dateRegex = /^(\d{2})\.(\d{2})\.(\d{4})$/;
        
        if (value && !dateRegex.test(value)) {
            birthdateInput.classList.add('input-error');
            if (birthdateHint) {
                birthdateHint.style.color = 'var(--color-error)';
                birthdateHint.textContent = '–ù–µ–≤–µ—Ä–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç –¥–∞—Ç—ã. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –î–î.–ú–ú.–ì–ì–ì–ì';
            }
            return false;
        }
        
        // –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ –¥–∞—Ç–∞ –≤–∞–ª–∏–¥–Ω–∞
        if (value && dateRegex.test(value)) {
            const match = value.match(dateRegex);
            const day = parseInt(match[1], 10);
            const month = parseInt(match[2], 10);
            const year = parseInt(match[3], 10);
            
            const date = new Date(year, month - 1, day);
            const today = new Date();
            
            if (date.getDate() !== day || date.getMonth() !== month - 1 || date.getFullYear() !== year) {
                birthdateInput.classList.add('input-error');
                if (birthdateHint) {
                    birthdateHint.style.color = 'var(--color-error)';
                    birthdateHint.textContent = '–ù–µ—Å—É—â–µ—Å—Ç–≤—É—é—â–∞—è –¥–∞—Ç–∞';
                }
                return false;
            }
            
            if (date >= today) {
                birthdateInput.classList.add('input-error');
                if (birthdateHint) {
                    birthdateHint.style.color = 'var(--color-error)';
                    birthdateHint.textContent = '–î–∞—Ç–∞ —Ä–æ–∂–¥–µ–Ω–∏—è –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –≤ –ø—Ä–æ—à–ª–æ–º';
                }
                return false;
            }
        }
        
        birthdateInput.classList.remove('input-error');
        if (birthdateHint) {
            birthdateHint.style.color = 'var(--color-success)';
            birthdateHint.textContent = '‚úì –§–æ—Ä–º–∞—Ç –¥–∞—Ç—ã –∫–æ—Ä—Ä–µ–∫—Ç–µ–Ω';
        }
        return true;
    }
    
    function clearValidationStyle(element) {
        element.classList.remove('input-error');
    }
    
    function showFormError(message) {
        // –°–æ–∑–¥–∞–µ–º –∏–ª–∏ –æ–±–Ω–æ–≤–ª—è–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ –æ–± –æ—à–∏–±–∫–µ —Ñ–æ—Ä–º—ã
        let errorDiv = document.querySelector('.form-global-error');
        if (!errorDiv) {
            errorDiv = document.createElement('div');
            errorDiv.className = 'form-global-error';
            profileForm.insertBefore(errorDiv, profileForm.firstChild);
        }
        
        errorDiv.innerHTML = `
            <div class="alert alert--error">
                <div class="alert__icon">‚ö†Ô∏è</div>
                <div class="alert__content">
                    <p class="alert__message">${message}</p>
                </div>
            </div>
        `;
        
        // –ü—Ä–æ–∫—Ä—É—á–∏–≤–∞–µ–º –∫ –æ—à–∏–±–∫–µ
        errorDiv.scrollIntoView({ behavior: 'smooth', block: 'start' });
    }
    
    // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
    if (phoneInput && phoneInput.value) {
        validatePhone();
    }
    
    if (birthdateInput && birthdateInput.value) {
        validateBirthdate();
    }
});
</script>

<style>
/* –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Å—Ç–∏–ª–∏ –¥–ª—è –≤–∞–ª–∏–¥–∞—Ü–∏–∏ */
.input-error {
    border-color: var(--color-error) !important;
    box-shadow: 0 0 0 2px var(--color-error-bg) !important;
}

.form-global-error {
    margin-bottom: 20px;
}

.alert {
    display: flex;
    align-items: flex-start;
    gap: 12px;
    padding: 16px;
    border-radius: var(--radius-md);
    border-left: 4px solid transparent;
}

.alert--error {
    background: var(--color-error-bg);
    border-left-color: var(--color-error);
}

.alert__icon {
    font-size: 1.2rem;
    flex-shrink: 0;
}

.alert__message {
    font-size: 0.9rem;
    color: var(--color-text);
    margin: 0;
    line-height: 1.4;
}

/* –ê–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç—å –¥–ª—è —Å–æ–æ–±—â–µ–Ω–∏–π */
@media (max-width: 768px) {
    .alert {
        flex-direction: column;
        text-align: center;
        gap: 8px;
    }
}
</style>
{% endblock script %}
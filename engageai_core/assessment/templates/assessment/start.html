{% extends 'base.html' %}
{% load static %}

{% block title %}–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —É—Ä–æ–≤–Ω—è CEFR | NeuroTutor{% endblock title %}

{% block content %}
<section class="test-start">
    <div class="test-start__container container">
        
        <!-- –ì–µ—Ä–æ–π —Å–µ–∫—Ü–∏—è -->
        <div class="test-start__hero card">
            <div class="test-hero">
                <div class="test-hero__icon">
                    <div class="test-icon">
                        <div class="test-icon__main">üéØ</div>
                        <div class="test-icon__ring"></div>
                    </div>
                </div>
                
                <div class="test-hero__content">
                    <h1 class="test-hero__title">–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —É—Ä–æ–≤–Ω—è CEFR</h1>
                    <p class="test-hero__subtitle">
                        –û–ø—Ä–µ–¥–µ–ª–∏—Ç–µ –≤–∞—à —Ç–µ–∫—É—â–∏–π —É—Ä–æ–≤–µ–Ω—å –∞–Ω–≥–ª–∏–π—Å–∫–æ–≥–æ –ø–æ –º–µ–∂–¥—É–Ω–∞—Ä–æ–¥–Ω–æ–π —à–∫–∞–ª–µ 
                        –∏ –ø–æ–ª—É—á–∏—Ç–µ –ø–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—É—é –ø—Ä–æ–≥—Ä–∞–º–º—É –æ–±—É—á–µ–Ω–∏—è
                    </p>
                    
                    <div class="test-hero__features">
                        <div class="test-feature">
                            <div class="test-feature__icon">üìä</div>
                            <div class="test-feature__text">–¢–æ—á–Ω–∞—è –æ—Ü–µ–Ω–∫–∞ 4 –Ω–∞–≤—ã–∫–æ–≤</div>
                        </div>
                        <div class="test-feature">
                            <div class="test-feature__icon">‚ö°</div>
                            <div class="test-feature__text">15-20 –º–∏–Ω—É—Ç</div>
                        </div>
                        <div class="test-feature">
                            <div class="test-feature__icon">ü§ñ</div>
                            <div class="test-feature__text">AI-–∞–Ω–∞–ª–∏–∑ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Ç–µ–Ω—Ç -->
        <div class="test-start__content">
            <div class="test-start__main">
                <!-- –§–æ—Ä–º–∞ –Ω–∞—á–∞–ª–∞ —Ç–µ—Å—Ç–∞ -->
                <div class="test-form card">
                    <div class="test-form__header">
                        <h2 class="test-form__title">–ù–∞—á–∞—Ç—å —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ</h2>
                        <p class="test-form__subtitle">
                            –ó–∞–ø–æ–ª–Ω–∏—Ç–µ –¥–∞–Ω–Ω—ã–µ –¥–ª—è –Ω–∞—á–∞–ª–∞ –∞–¥–∞–ø—Ç–∏–≤–Ω–æ–≥–æ —Ç–µ—Å—Ç–∞
                        </p>
                    </div>

                    <form method="post" class="test-form__form">
                        {% csrf_token %}
                        
                        <div class="form-fields">
                            {% for field in form %}
                            <div class="form-field">
                                <label for="{{ field.id_for_label }}" class="form-field__label">
                                    {{ field.label }}
                                    {% if field.field.required %}
                                        <span class="form-field__required">*</span>
                                    {% endif %}
                                </label>
                                
                                <div class="input-wrapper">
                                    {% if field.name == 'email' %}
                                        <div class="input-icon">üìß</div>
                                    {% elif field.name == 'first_name' %}
                                        <div class="input-icon">üë§</div>
                                    {% elif field.name == 'last_name' %}
                                        <div class="input-icon">üë•</div>
                                    {% endif %}
                                    
                                    {{ field }}
                                </div>
                                
                                {% if field.help_text %}
                                <div class="form-field__hint">
                                    {{ field.help_text }}
                                </div>
                                {% endif %}
                                
                                {% if field.errors %}
                                <div class="form-field__errors">
                                    {{ field.errors }}
                                </div>
                                {% endif %}
                            </div>
                            {% endfor %}
                        </div>

                        <div class="test-form__actions">
                            <button type="submit" class="btn btn_primary btn_lg test-start__btn">
                                <span class="btn__icon">üöÄ</span>
                                –ù–∞—á–∞—Ç—å —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
                            </button>
                        </div>
                    </form>
                </div>
            </div>

            <div class="test-start__sidebar">
                <!-- –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Ç–µ—Å—Ç–µ -->
                <div class="test-info card">
                    <h3 class="test-info__title">–û —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏</h3>
                    
                    <div class="test-info__content">
                        <div class="info-section">
                            <h4 class="info-section__title">–ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç</h4>
                            <ul class="info-section__list">
                                <li class="info-section__item">‚úÖ –ê–¥–∞–ø—Ç–∏–≤–Ω—ã–µ –≤–æ–ø—Ä–æ—Å—ã</li>
                                <li class="info-section__item">‚úÖ 4 —è–∑—ã–∫–æ–≤—ã—Ö –Ω–∞–≤—ã–∫–∞</li>
                                <li class="info-section__item">‚úÖ –ú–≥–Ω–æ–≤–µ–Ω–Ω—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã</li>
                                <li class="info-section__item">‚úÖ –ü–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏</li>
                            </ul>
                        </div>
                        
                        <div class="info-section">
                            <h4 class="info-section__title">–£—Ä–æ–≤–Ω–∏ CEFR</h4>
                            <div class="cefr-levels">
                                <div class="cefr-level">
                                    <span class="cefr-level__name">A1-A2</span>
                                    <span class="cefr-level__desc">–ù–∞—á–∞–ª—å–Ω—ã–π</span>
                                </div>
                                <div class="cefr-level">
                                    <span class="cefr-level__name">B1-B2</span>
                                    <span class="cefr-level__desc">–°—Ä–µ–¥–Ω–∏–π</span>
                                </div>
                                <div class="cefr-level">
                                    <span class="cefr-level__name">C1-C2</span>
                                    <span class="cefr-level__desc">–ü—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–π</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- –°–æ–≤–µ—Ç—ã –ø–æ –ø—Ä–æ—Ö–æ–∂–¥–µ–Ω–∏—é -->
                <div class="test-tips card">
                    <h3 class="test-tips__title">–°–æ–≤–µ—Ç—ã –¥–ª—è —É—Å–ø–µ—Ö–∞</h3>
                    
                    <div class="test-tips__list">
                        <div class="test-tip">
                            <div class="test-tip__icon">üí°</div>
                            <div class="test-tip__content">
                                <strong>–û—Ç–≤–µ—á–∞–π—Ç–µ —á–µ—Å—Ç–Ω–æ</strong>
                                <p>–ù–µ —É–≥–∞–¥—ã–≤–∞–π—Ç–µ - —ç—Ç–æ –∏—Å–∫–∞–∑–∏—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã</p>
                            </div>
                        </div>
                        
                        <div class="test-tip">
                            <div class="test-tip__icon">‚è±Ô∏è</div>
                            <div class="test-tip__content">
                                <strong>–ù–µ —Ç–æ—Ä–æ–ø–∏—Ç–µ—Å—å</strong>
                                <p>–í–Ω–∏–º–∞—Ç–µ–ª—å–Ω–æ —á–∏—Ç–∞–π—Ç–µ –≤–æ–ø—Ä–æ—Å—ã</p>
                            </div>
                        </div>
                        
                        <div class="test-tip">
                            <div class="test-tip__icon">üéØ</div>
                            <div class="test-tip__content">
                                <strong>–†–∞—Å—Å–ª–∞–±—å—Ç–µ—Å—å</strong>
                                <p>–≠—Ç–æ —Ç–æ–ª—å–∫–æ —Ç–µ—Å—Ç, –∞ –Ω–µ —ç–∫–∑–∞–º–µ–Ω</p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ -->
                <div class="test-stats card">
                    <h3 class="test-stats__title">–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</h3>
                    
                    <div class="test-stats__content">
                        <div class="stat-item">
                            <div class="stat-item__value">2,847+</div>
                            <div class="stat-item__label">—É—á–µ–Ω–∏–∫–æ–≤ –ø—Ä–æ—à–ª–∏ —Ç–µ—Å—Ç</div>
                        </div>
                        
                        <div class="stat-item">
                            <div class="stat-item__value">94%</div>
                            <div class="stat-item__label">–ø–æ–ª—É—á–∏–ª–∏ —Ç–æ—á–Ω—É—é –æ—Ü–µ–Ω–∫—É</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>
{% endblock content %}

{% block script %}
<script>
document.addEventListener('DOMContentLoaded', function() {
    // –ê–Ω–∏–º–∞—Ü–∏—è –∏–∫–æ–Ω–∫–∏ —Ç–µ—Å—Ç–∞
    const testIcon = document.querySelector('.test-icon');
    if (testIcon) {
        const ring = testIcon.querySelector('.test-icon__ring');
        let rotation = 0;
        
        function animateRing() {
            rotation += 0.2;
            ring.style.transform = `translate(-50%, -50%) rotate(${rotation}deg)`;
            requestAnimationFrame(animateRing);
        }
        
        animateRing();
    }
    
    // –î–æ–±–∞–≤–ª—è–µ–º —Ñ–æ–∫—É—Å-—Å—Ç–∏–ª–∏ –∫ –ø–æ–ª—è–º –≤–≤–æ–¥–∞
    const inputs = document.querySelectorAll('.input-wrapper input, .input-wrapper textarea, .input-wrapper select');
    inputs.forEach(input => {
        input.addEventListener('focus', function() {
            this.parentElement.classList.add('input-wrapper--focused');
        });
        
        input.addEventListener('blur', function() {
            this.parentElement.classList.remove('input-wrapper--focused');
        });
    });
    
    // –í–∞–ª–∏–¥–∞—Ü–∏—è —Ñ–æ—Ä–º—ã
    const form = document.querySelector('.test-form__form');
    const submitBtn = document.querySelector('.test-start__btn');
    
    if (form && submitBtn) {
        form.addEventListener('submit', function() {
            submitBtn.disabled = true;
            submitBtn.innerHTML = '<span class="btn__icon">‚è≥</span>–ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–∞...';
        });
    }
    
    // –ü–ª–∞–≤–Ω–æ–µ –ø–æ—è–≤–ª–µ–Ω–∏–µ —ç–ª–µ–º–µ–Ω—Ç–æ–≤
    const observerOptions = {
        threshold: 0.1,
        rootMargin: '0px 0px -50px 0px'
    };

    const observer = new IntersectionObserver(function(entries) {
        entries.forEach(entry => {
            if (entry.isIntersecting) {
                entry.target.classList.add('animate-in');
            }
        });
    }, observerOptions);

    document.querySelectorAll('.card').forEach(card => {
        observer.observe(card);
    });
});
</script>

<style>
/* –°–¢–ò–õ–ò –°–¢–†–ê–ù–ò–¶–´ –ù–ê–ß–ê–õ–ê –¢–ï–°–¢–ê */
.test-start {
    padding: 40px 0;
    background: linear-gradient(135deg, var(--color-bg) 0%, var(--color-surface-alt) 100%);
    min-height: 100vh;
}

.test-start__container {
    max-width: 1200px;
    margin: 0 auto;
    display: flex;
    flex-direction: column;
    gap: 30px;
}

/* –ì–µ—Ä–æ–π —Å–µ–∫—Ü–∏—è */
.test-start__hero {
    padding: 40px;
    background: linear-gradient(135deg, var(--color-accent) 0%, var(--color-accent-dark) 100%);
    color: white;
    position: relative;
    overflow: hidden;
}

.test-hero {
    display: grid;
    grid-template-columns: auto 1fr;
    gap: 40px;
    align-items: center;
    position: relative;
    z-index: 2;
}

.test-hero__icon {
    flex-shrink: 0;
}

.test-icon {
    position: relative;
    display: inline-block;
}

.test-icon__main {
    font-size: 4rem;
    position: relative;
    z-index: 2;
}

.test-icon__ring {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    width: 80px;
    height: 80px;
    border: 3px solid rgba(255,255,255,0.3);
    border-radius: 50%;
    border-top-color: rgba(255,255,255,0.8);
}

.test-hero__title {
    font-size: 2.5rem;
    font-weight: 700;
    margin-bottom: 16px;
    line-height: 1.2;
}

.test-hero__subtitle {
    font-size: 1.2rem;
    opacity: 0.9;
    line-height: 1.6;
    margin-bottom: 24px;
}

.test-hero__features {
    display: flex;
    gap: 20px;
    flex-wrap: wrap;
}

.test-feature {
    display: flex;
    align-items: center;
    gap: 8px;
    padding: 8px 16px;
    background: rgba(255,255,255,0.2);
    border-radius: 20px;
    font-size: 0.9rem;
    font-weight: 500;
}

/* –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Ç–µ–Ω—Ç */
.test-start__content {
    display: grid;
    grid-template-columns: 2fr 1fr;
    gap: 30px;
    align-items: start;
}

/* –§–æ—Ä–º–∞ —Ç–µ—Å—Ç–∞ */
.test-form {
    padding: 40px;
}

.test-form__header {
    text-align: center;
    margin-bottom: 32px;
}

.test-form__title {
    font-size: 2rem;
    font-weight: 700;
    color: var(--color-text);
    margin-bottom: 8px;
}

.test-form__subtitle {
    font-size: 1.1rem;
    color: var(--color-text-muted);
    line-height: 1.5;
    margin: 0;
}

.form-fields {
    display: flex;
    flex-direction: column;
    gap: 24px;
    margin-bottom: 32px;
}

.test-form__actions {
    text-align: center;
}

/* –°–∞–π–¥–±–∞—Ä */
.test-start__sidebar {
    display: flex;
    flex-direction: column;
    gap: 20px;
    position: sticky;
    top: 100px;
}

/* –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Ç–µ—Å—Ç–µ */
.test-info__content {
    display: flex;
    flex-direction: column;
    gap: 20px;
}

.info-section__title {
    font-size: 1rem;
    font-weight: 600;
    color: var(--color-text);
    margin-bottom: 12px;
}

.info-section__list {
    margin: 0;
    padding: 0;
    list-style: none;
}

.info-section__item {
    padding: 6px 0;
    font-size: 0.9rem;
    color: var(--color-text);
}

.cefr-levels {
    display: flex;
    flex-direction: column;
    gap: 8px;
}

.cefr-level {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 8px 12px;
    background: var(--color-surface-alt);
    border-radius: var(--radius-md);
    border-left: 4px solid var(--color-accent);
}

.cefr-level__name {
    font-weight: 600;
    color: var(--color-text);
}

.cefr-level__desc {
    font-size: 0.8rem;
    color: var(--color-text-muted);
}

/* –°–æ–≤–µ—Ç—ã */
.test-tips__list {
    display: flex;
    flex-direction: column;
    gap: 16px;
}

.test-tip {
    display: flex;
    gap: 12px;
    align-items: flex-start;
}

.test-tip__icon {
    font-size: 1.2rem;
    flex-shrink: 0;
    margin-top: 2px;
}

.test-tip__content strong {
    display: block;
    font-size: 0.9rem;
    color: var(--color-text);
    margin-bottom: 4px;
}

.test-tip__content p {
    font-size: 0.8rem;
    color: var(--color-text-muted);
    margin: 0;
    line-height: 1.4;
}

/* –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ */
.test-stats__content {
    display: flex;
    flex-direction: column;
    gap: 16px;
}

.stat-item {
    text-align: center;
    padding: 16px;
    background: var(--color-surface-alt);
    border-radius: var(--radius-md);
}

.stat-item__value {
    font-size: 1.5rem;
    font-weight: 700;
    color: var(--color-accent);
    margin-bottom: 4px;
}

.stat-item__label {
    font-size: 0.8rem;
    color: var(--color-text-muted);
    line-height: 1.3;
}

/* –ê–Ω–∏–º–∞—Ü–∏–∏ */
.card {
    opacity: 0;
    transform: translateY(20px);
    transition: all 0.6s ease;
}

.card.animate-in {
    opacity: 1;
    transform: translateY(0);
}

/* ==================== */
/* –ê–î–ê–ü–¢–ò–í–ù–û–°–¢–¨ */
/* ==================== */

@media (max-width: 1024px) {
    .test-start__content {
        grid-template-columns: 1fr;
        gap: 24px;
    }
    
    .test-start__sidebar {
        position: static;
    }
}

@media (max-width: 768px) {
    .test-hero {
        grid-template-columns: 1fr;
        text-align: center;
        gap: 24px;
    }
    
    .test-hero__features {
        justify-content: center;
    }
    
    .test-form {
        padding: 30px 20px;
    }
    
    .test-start__hero {
        padding: 30px 20px;
    }
}

@media (max-width: 576px) {
    .test-hero__title {
        font-size: 2rem;
    }
    
    .test-form__title {
        font-size: 1.6rem;
    }
    
    .test-hero__features {
        flex-direction: column;
        align-items: center;
    }
}

@media (prefers-reduced-motion: reduce) {
    .test-icon__ring,
    .card {
        transition: none;
        animation: none;
    }
}
</style>
{% endblock script %}